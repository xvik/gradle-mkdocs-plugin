{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to gradle-mkdocs-plugin \u00b6 Mkdocs (python tool) documentation generation and publishing plugin Release notes - Migration notes - License Ideal for open source projects \u00b6 Easy start: initial docs source generation Markdown syntax (with handy extensions) Great look from material theme (used by default) with extra features: Mobile friendly Embedded search Syntax highlighting Dark theme switcher Easy documentation contribution (jump to source directly from doc) Multi-version documentation publishing to github pages Support version aliases (latest, dev, etc) Support mkdocs-material version switcher without mike tool usage Variables support Could work with direct python or docker. Could use requirements.txt file Common configurations (cheat sheet) Example usages: \u00b6 mkdocs-gradle-plugin (self) use-python-gradle-plugin (base plugin) dropwizard-guicey gradle-quality-plugin","title":"Home"},{"location":"#welcome-to-gradle-mkdocs-plugin","text":"Mkdocs (python tool) documentation generation and publishing plugin Release notes - Migration notes - License","title":"Welcome to gradle-mkdocs-plugin"},{"location":"#ideal-for-open-source-projects","text":"Easy start: initial docs source generation Markdown syntax (with handy extensions) Great look from material theme (used by default) with extra features: Mobile friendly Embedded search Syntax highlighting Dark theme switcher Easy documentation contribution (jump to source directly from doc) Multi-version documentation publishing to github pages Support version aliases (latest, dev, etc) Support mkdocs-material version switcher without mike tool usage Variables support Could work with direct python or docker. Could use requirements.txt file Common configurations (cheat sheet)","title":"Ideal for open source projects"},{"location":"#example-usages","text":"mkdocs-gradle-plugin (self) use-python-gradle-plugin (base plugin) dropwizard-guicey gradle-quality-plugin","title":"Example usages:"},{"location":"examples/","text":"Example configurations \u00b6 Common configurations cheat-sheet. Single version \u00b6 mkdocs . publish . docPath = '' Documentation always published into root folder: gh-pages root/ generated docs Very specific option, suitable for some site, blog etc. Project documentation requires multi-version publication so users could always consult with old docs. Simple multi-version \u00b6 mkdocs . publish { docPath = ' $version ' rootRedirect = true } Documentation published into sub-folder. Only this sub folder would be updated on publication - other folders remain untouched. Tip It's better to specify exact version in docPath , because usually documentation site being updated after release and with default $version you would publish snapshot version instead. docPath = '1.0' Each publication would publish: gh-pages root/ version/ generated docs index.html versions.json Root index.html required to redirect use to the latest version when it opens site root. To activate version switcher component add in mkdocs.yml: extra : version : provider : mike (component requires only versions.json file generated at site root) Using latest alias \u00b6 It is quite common for projects to allow user to put latest in doc url instead of exact version: this way user could put link in his own code/docs which would always lead to up-to-date page. mkdocs . publish { docPath = '1.0' rootRedirect = true versionAliases = [ 'latest' ] } Everything as before, but on publication new folder would appear: gh-pages root/ version/ generated docs latest/ generated docs index.html versions.json Root redirect to alias \u00b6 In the example above root is still redirecting to exact version. To redirect into latest alias: mkdocs . publish { docPath = '1.0' rootRedirect = true rootRedirectTo = 'latest' versionAliases = [ 'latest' ] } And now site root will lead to latest directory. See plugin site as an example. Reference project version in docs \u00b6 It is a very common need to reference project version instead of changing it everywhere before each release. It is possible with variables support . In mkdocs.yml add plugins: plugins : - search - markdownextradata In build.gradle declare variables: mkdocs { extras = [ 'version' : \"${-> project.version}\" ] } Now you can reference version as: {{ gradle.version }} But, as mentioned before, it is more common to put raw version instead of relying on project version (because release docs could be updated after release): mkdocs { publish . docPath = '1.0' extras = [ 'version' : '1.0' ] } Or, to avoid duplication: mkdocs { extras = [ 'version' : '1.0' ] publish . docPath = mkdocs . extras [ 'version' ] } Old version publish \u00b6 You can always change and re-publish any old documentation version: it works the same as with new version publication. EXCEPT: Remember to switch off root redirection with mkdocs.publish.rootRedirect = false : otherwise root index.html would be overridden and site root would point to wrong docs version Remember to remove aliases (remove mkdocs.publish.versionAliases ): otherwise alias folders would be overridden (e.g. latest would contain old version) Use mkdocsVersionsFile task to validate old version correctness: It would try to warn you if it can detect more recent versions override Incremental versions update \u00b6 When plugin used only for documentation generation and publication task is not used, then versions.json file can be updated incrementally (by adding new version on each release): mkdocs . publish { docPath = '1.0' rootRedirect = true rootRedirectTo = 'latest' versionAliases = [ 'latest' ] existingVersionsFile = 'https://xvik.github.io/gradle-mkdocs-plugin/versions.json' } On mkdocsBuild it would load remote json (it might be local path) and add new version, so build dir would contain: build/mkdocs/ /1.0/ - mkdocs site /latest/ - alias (copy) index.html - redirect to 'latest' versions.json - updated remote versions file After that built folder might be simply uploaded, for example into some ftp with other versions (append).","title":"Examples"},{"location":"examples/#example-configurations","text":"Common configurations cheat-sheet.","title":"Example configurations"},{"location":"examples/#single-version","text":"mkdocs . publish . docPath = '' Documentation always published into root folder: gh-pages root/ generated docs Very specific option, suitable for some site, blog etc. Project documentation requires multi-version publication so users could always consult with old docs.","title":"Single version"},{"location":"examples/#simple-multi-version","text":"mkdocs . publish { docPath = ' $version ' rootRedirect = true } Documentation published into sub-folder. Only this sub folder would be updated on publication - other folders remain untouched. Tip It's better to specify exact version in docPath , because usually documentation site being updated after release and with default $version you would publish snapshot version instead. docPath = '1.0' Each publication would publish: gh-pages root/ version/ generated docs index.html versions.json Root index.html required to redirect use to the latest version when it opens site root. To activate version switcher component add in mkdocs.yml: extra : version : provider : mike (component requires only versions.json file generated at site root)","title":"Simple multi-version"},{"location":"examples/#using-latest-alias","text":"It is quite common for projects to allow user to put latest in doc url instead of exact version: this way user could put link in his own code/docs which would always lead to up-to-date page. mkdocs . publish { docPath = '1.0' rootRedirect = true versionAliases = [ 'latest' ] } Everything as before, but on publication new folder would appear: gh-pages root/ version/ generated docs latest/ generated docs index.html versions.json","title":"Using latest alias"},{"location":"examples/#root-redirect-to-alias","text":"In the example above root is still redirecting to exact version. To redirect into latest alias: mkdocs . publish { docPath = '1.0' rootRedirect = true rootRedirectTo = 'latest' versionAliases = [ 'latest' ] } And now site root will lead to latest directory. See plugin site as an example.","title":"Root redirect to alias"},{"location":"examples/#reference-project-version-in-docs","text":"It is a very common need to reference project version instead of changing it everywhere before each release. It is possible with variables support . In mkdocs.yml add plugins: plugins : - search - markdownextradata In build.gradle declare variables: mkdocs { extras = [ 'version' : \"${-> project.version}\" ] } Now you can reference version as: {{ gradle.version }} But, as mentioned before, it is more common to put raw version instead of relying on project version (because release docs could be updated after release): mkdocs { publish . docPath = '1.0' extras = [ 'version' : '1.0' ] } Or, to avoid duplication: mkdocs { extras = [ 'version' : '1.0' ] publish . docPath = mkdocs . extras [ 'version' ] }","title":"Reference project version in docs"},{"location":"examples/#old-version-publish","text":"You can always change and re-publish any old documentation version: it works the same as with new version publication. EXCEPT: Remember to switch off root redirection with mkdocs.publish.rootRedirect = false : otherwise root index.html would be overridden and site root would point to wrong docs version Remember to remove aliases (remove mkdocs.publish.versionAliases ): otherwise alias folders would be overridden (e.g. latest would contain old version) Use mkdocsVersionsFile task to validate old version correctness: It would try to warn you if it can detect more recent versions override","title":"Old version publish"},{"location":"examples/#incremental-versions-update","text":"When plugin used only for documentation generation and publication task is not used, then versions.json file can be updated incrementally (by adding new version on each release): mkdocs . publish { docPath = '1.0' rootRedirect = true rootRedirectTo = 'latest' versionAliases = [ 'latest' ] existingVersionsFile = 'https://xvik.github.io/gradle-mkdocs-plugin/versions.json' } On mkdocsBuild it would load remote json (it might be local path) and add new version, so build dir would contain: build/mkdocs/ /1.0/ - mkdocs site /latest/ - alias (copy) index.html - redirect to 'latest' versions.json - updated remote versions file After that built folder might be simply uploaded, for example into some ftp with other versions (append).","title":"Incremental versions update"},{"location":"getting-started/","text":"Getting started \u00b6 Installation \u00b6 buildscript { repositories { mavenCentral () } dependencies { classpath 'ru.vyarus:gradle-mkdocs-plugin:3.0.0' } } apply plugin: 'ru.vyarus.mkdocs' OR plugins { id 'ru.vyarus.mkdocs' version '3.0.0' } Note There is also a lightweight plugin version ru.vyarus.mkdocs-build without git publication (see below). Python \u00b6 Important Plugin based on python plugin which implements all python-related staff like virtualenv creation, pip modules installation and python commands execution. Mkdocs plugin just provides mkdocs-specific tasks above it. For all python-related configuration see python plugin documentation It was an initial goal to write two plugins instead of one in order to be able to easilly create plugins for other python modules (if required). Requires installed python 3.8 and above with pip. Check and install python if required . Note Plugin will not affect global python: it will create project-specific virtualenv (in .gradle/python ) and install all required (pip) modules there. This will grant build reproduction (once initialized virtualenv used for all future executions). Tip It is completely normal to manually remove virtualenv folder ( .gradle/python ) in case of problems to re-create environment. Docker \u00b6 If you have docker installed, you can use python from docker container : python . docker . use = true In this case global python installation is not required. Tip To learn how docker used read python plugin documentation Usage \u00b6 By default, documentation source assumed to be in src/doc . Tip Default location could be changed: mkdocs.sourcesDir = 'docs' Call mkdocsInit task to generate initial site version (into src/doc by default): src/doc/ docs/ - documentation source ... index.md mkdocs.yml - site configuration Note Plugin does not use mkdocs new command for site generation: custom template used with pre-configured plugins and enabled material theme. Call mkdocsServe task to start live reload server to see default site: http://127.0.0.1:8000/ . Tip Used port may be changed: mkdocs.devPort = 4000 . Note that this setting overrides dev_addr in mkdocs.yml! Warning Python process may not be killed after you stop gradle execution (search and kill python process manually). This is a known gradle problem and the only known workaround is to start task without daemon: gradlew mkdocsServe --no-daemon . Another alternative is to start serve command directly: copy console command from task execution log and use it directly. When docker used, container should be properly shut down, but not immediately (about 10s). Initial site configuration \u00b6 Open generated mkdocs config file src/doc/mkdocs.yml . It contains many commented options: Commented option Recommendation site_author fill with you name or remove (appear in meta tags only) site_url Set to documentation root url (gh-pages url). Used as meta tag, as a link on the home icon and inside generated sitemap.xml. NOTE plugin will automatically modify url to point to correct published folder (when multi-version publication used). Repository link on each page (right top corner) repo_name Source repository link text (by default set to project name) repo_url Repository url (Github or Bitbucket) edit_uri Path to documentation source in the source repository (required for \"edit page\" (pencil icon) link) Copyright copyright Shown below each page For material theme configuration see: configuration docs . Read about navigation configuration to fine tune navigation menus behavior (in theme.features section). Note Material theme supports docs version selector natively , but requires mike tool. Gradle plugin provides its own publishing implementation (not requiring mike) with exactly the same features (but easier to configure from gradle). So if you want version switcher, just enable it as shown in docs and it will work. Another commonly used feature is dark theme toggle Writing \u00b6 Yaml configuration nav section declares your documentation structure. Pages inside docs folder may be structured as you want. To add new page simply add new markdown file (page.md) and add reference to it in nav config section. Note All changes are immediately appeared in the started live reload server ( mkdocsServe ) You can use gradle-driven variables , for example, to insert project version in docs. Read: Mkdocs getting started guide . Mkdocs-material extensions . Mkdocs config generated by mkdocsInit task already enables all extensions according to recommended configuration . But you still need to know how to use them, so read this section. Tip If you want to use a different theme (not material) then you'll need to configure it Building \u00b6 Warning You will need to stop livereload server in order to build By default, mkdocsBuild task will generate (suppose project version is '1.0-SNAPSHOT'): build/mkdocs/ /1.0-SNAPSHOT/ - mkdocs site index.html - redirect to correct site Note Also, versions.json file generated during publication (for version switcher) Plugin is configured for multi-version documentation publishing: each version is in it's own folder and special index.html at the root will redirect to the latest version (when published). Everything in build/mkdocs/ is assumed to be published into github pages (preserving all other already published folders). Default configuration: mkdocs . publish { docPath = '$version' rootRedirect = true } As documentation is often updated for already released version, it makes sense to define current version manually (or define it when you need to publish to exact version): mkdocs . publish . docPath = '1.0' Tip See multi-version section for how to publish older docs version Tip You can also use version aliases like latest or dev or 1.x and perform root redirection to alias instead of exact version (common case, show 'latest') See examples section with most common configurations. Single version site \u00b6 If you don't want to use multi-version support at all then: mkdocs.publish.docPath = '' // or null This way, mkdocs site will always be published at the root (in case of publish it will always replace previous site version). Publication \u00b6 When documentation site will be ready, you will need to call mkdocksPublish in order to publish it to github pages (default). If your repo is https://github.com/me/my-project then documentation will be available as https://me.github.io/my-project/ . Published index.html at the root will immediately redirect you to the actual version: https://me.github.io/my-project/1.0.0/ . See more about publication customization in publication section. It also describes how to publish additional parts with documentation site (like javadoc). Custom publication \u00b6 If you don't plan to use publication into git then there is a lightweight plugin version without publication tasks: plugins { id 'ru.vyarus.mkdocs-build' version '3.0.0' } Full ru.vyarus.mkdocs plugin actually enables ru.vyarus.mkdocs-build plus configures publication tasks. So plugins are completely equal in functionality except publication. Note Root redirection (index.html) and aliases are all generated with mkdocsBuild task, so you will not lose these features. But versions.json file is generated only during publication (required for version switcher, generated by analyzing existing folders in git branch) Incremental versions \u00b6 Plugin provides two mechanisms for managing versions.json file (required for version switcher in documentation). By default, during publication ( mkdocsPublish task) plugin will generate versions.json based on folders in the target git branch. This is the safest option as it will detect all removed documentation versions and update versions file accordingly. But, if you don't use git publication, you can enable \"incremental versions\": on build plugin would simply add new version to the existing versions file. To enable this just specify current versions file: mkdocs . publish . existingVersionsFile = 'path/to/actual/versions.json' Or use an url to existing documentation site: mkdocs . publish . existingVersionsFile = 'https://xvik.github.io/gradle-mkdocs-plugin/versions.json' Note This mechanism will create new file each time it can't find configured file (in order to support first publication case). Please pay attention to logs. Pip \u00b6 See pip section if you need to change mkdocs version, use custom theme or plugin.","title":"Getting started"},{"location":"getting-started/#getting-started","text":"","title":"Getting started"},{"location":"getting-started/#installation","text":"buildscript { repositories { mavenCentral () } dependencies { classpath 'ru.vyarus:gradle-mkdocs-plugin:3.0.0' } } apply plugin: 'ru.vyarus.mkdocs' OR plugins { id 'ru.vyarus.mkdocs' version '3.0.0' } Note There is also a lightweight plugin version ru.vyarus.mkdocs-build without git publication (see below).","title":"Installation"},{"location":"getting-started/#python","text":"Important Plugin based on python plugin which implements all python-related staff like virtualenv creation, pip modules installation and python commands execution. Mkdocs plugin just provides mkdocs-specific tasks above it. For all python-related configuration see python plugin documentation It was an initial goal to write two plugins instead of one in order to be able to easilly create plugins for other python modules (if required). Requires installed python 3.8 and above with pip. Check and install python if required . Note Plugin will not affect global python: it will create project-specific virtualenv (in .gradle/python ) and install all required (pip) modules there. This will grant build reproduction (once initialized virtualenv used for all future executions). Tip It is completely normal to manually remove virtualenv folder ( .gradle/python ) in case of problems to re-create environment.","title":"Python"},{"location":"getting-started/#docker","text":"If you have docker installed, you can use python from docker container : python . docker . use = true In this case global python installation is not required. Tip To learn how docker used read python plugin documentation","title":"Docker"},{"location":"getting-started/#usage","text":"By default, documentation source assumed to be in src/doc . Tip Default location could be changed: mkdocs.sourcesDir = 'docs' Call mkdocsInit task to generate initial site version (into src/doc by default): src/doc/ docs/ - documentation source ... index.md mkdocs.yml - site configuration Note Plugin does not use mkdocs new command for site generation: custom template used with pre-configured plugins and enabled material theme. Call mkdocsServe task to start live reload server to see default site: http://127.0.0.1:8000/ . Tip Used port may be changed: mkdocs.devPort = 4000 . Note that this setting overrides dev_addr in mkdocs.yml! Warning Python process may not be killed after you stop gradle execution (search and kill python process manually). This is a known gradle problem and the only known workaround is to start task without daemon: gradlew mkdocsServe --no-daemon . Another alternative is to start serve command directly: copy console command from task execution log and use it directly. When docker used, container should be properly shut down, but not immediately (about 10s).","title":"Usage"},{"location":"getting-started/#initial-site-configuration","text":"Open generated mkdocs config file src/doc/mkdocs.yml . It contains many commented options: Commented option Recommendation site_author fill with you name or remove (appear in meta tags only) site_url Set to documentation root url (gh-pages url). Used as meta tag, as a link on the home icon and inside generated sitemap.xml. NOTE plugin will automatically modify url to point to correct published folder (when multi-version publication used). Repository link on each page (right top corner) repo_name Source repository link text (by default set to project name) repo_url Repository url (Github or Bitbucket) edit_uri Path to documentation source in the source repository (required for \"edit page\" (pencil icon) link) Copyright copyright Shown below each page For material theme configuration see: configuration docs . Read about navigation configuration to fine tune navigation menus behavior (in theme.features section). Note Material theme supports docs version selector natively , but requires mike tool. Gradle plugin provides its own publishing implementation (not requiring mike) with exactly the same features (but easier to configure from gradle). So if you want version switcher, just enable it as shown in docs and it will work. Another commonly used feature is dark theme toggle","title":"Initial site configuration"},{"location":"getting-started/#writing","text":"Yaml configuration nav section declares your documentation structure. Pages inside docs folder may be structured as you want. To add new page simply add new markdown file (page.md) and add reference to it in nav config section. Note All changes are immediately appeared in the started live reload server ( mkdocsServe ) You can use gradle-driven variables , for example, to insert project version in docs. Read: Mkdocs getting started guide . Mkdocs-material extensions . Mkdocs config generated by mkdocsInit task already enables all extensions according to recommended configuration . But you still need to know how to use them, so read this section. Tip If you want to use a different theme (not material) then you'll need to configure it","title":"Writing"},{"location":"getting-started/#building","text":"Warning You will need to stop livereload server in order to build By default, mkdocsBuild task will generate (suppose project version is '1.0-SNAPSHOT'): build/mkdocs/ /1.0-SNAPSHOT/ - mkdocs site index.html - redirect to correct site Note Also, versions.json file generated during publication (for version switcher) Plugin is configured for multi-version documentation publishing: each version is in it's own folder and special index.html at the root will redirect to the latest version (when published). Everything in build/mkdocs/ is assumed to be published into github pages (preserving all other already published folders). Default configuration: mkdocs . publish { docPath = '$version' rootRedirect = true } As documentation is often updated for already released version, it makes sense to define current version manually (or define it when you need to publish to exact version): mkdocs . publish . docPath = '1.0' Tip See multi-version section for how to publish older docs version Tip You can also use version aliases like latest or dev or 1.x and perform root redirection to alias instead of exact version (common case, show 'latest') See examples section with most common configurations.","title":"Building"},{"location":"getting-started/#single-version-site","text":"If you don't want to use multi-version support at all then: mkdocs.publish.docPath = '' // or null This way, mkdocs site will always be published at the root (in case of publish it will always replace previous site version).","title":"Single version site"},{"location":"getting-started/#publication","text":"When documentation site will be ready, you will need to call mkdocksPublish in order to publish it to github pages (default). If your repo is https://github.com/me/my-project then documentation will be available as https://me.github.io/my-project/ . Published index.html at the root will immediately redirect you to the actual version: https://me.github.io/my-project/1.0.0/ . See more about publication customization in publication section. It also describes how to publish additional parts with documentation site (like javadoc).","title":"Publication"},{"location":"getting-started/#custom-publication","text":"If you don't plan to use publication into git then there is a lightweight plugin version without publication tasks: plugins { id 'ru.vyarus.mkdocs-build' version '3.0.0' } Full ru.vyarus.mkdocs plugin actually enables ru.vyarus.mkdocs-build plus configures publication tasks. So plugins are completely equal in functionality except publication. Note Root redirection (index.html) and aliases are all generated with mkdocsBuild task, so you will not lose these features. But versions.json file is generated only during publication (required for version switcher, generated by analyzing existing folders in git branch)","title":"Custom publication"},{"location":"getting-started/#incremental-versions","text":"Plugin provides two mechanisms for managing versions.json file (required for version switcher in documentation). By default, during publication ( mkdocsPublish task) plugin will generate versions.json based on folders in the target git branch. This is the safest option as it will detect all removed documentation versions and update versions file accordingly. But, if you don't use git publication, you can enable \"incremental versions\": on build plugin would simply add new version to the existing versions file. To enable this just specify current versions file: mkdocs . publish . existingVersionsFile = 'path/to/actual/versions.json' Or use an url to existing documentation site: mkdocs . publish . existingVersionsFile = 'https://xvik.github.io/gradle-mkdocs-plugin/versions.json' Note This mechanism will create new file each time it can't find configured file (in order to support first publication case). Please pay attention to logs.","title":"Incremental versions"},{"location":"getting-started/#pip","text":"See pip section if you need to change mkdocs version, use custom theme or plugin.","title":"Pip"},{"location":"about/compatibility/","text":"Gradle compatibility \u00b6 Plugin compiled for java 8, compatible with java 11. Works on windows and linux (and macos). Gradle Version 5.3-7 3.0.0 5-5.2 2.3.0 4.x 1.1.0","title":"Compatibility"},{"location":"about/compatibility/#gradle-compatibility","text":"Plugin compiled for java 8, compatible with java 11. Works on windows and linux (and macos). Gradle Version 5.3-7 3.0.0 5-5.2 2.3.0 4.x 1.1.0","title":"Gradle compatibility"},{"location":"about/history/","text":"3.0.0 (2022-11-01) \u00b6 (breaking) Drop gradle 5.0-5.2 support (minimum required gradle is 5.3) Python plugin related changes: Add docker support (with raw python container by default) Add python requirements.txt file support Add cleanPython task to easily cleanup local environment Dev server port number is now configurable: devPort property (this required for proper docker support when non-local ip must be specified) mkdocs.resolveDocPath() never return null: for single version docs '.' is returned now instead of null (#41) Update packages: mkdocs 1.3.0 -> 1.4.1 mkdocs-material 8.3.6 -> 8.5.7 pygments 2.12.0 -> 2.13.0 pymdown-extensions 9.4 -> 9.7 Ignore all git errors during plugin initialization (git used to resolve repoUrl on initialization) (#45) Split plugin into 2 plugins to let users use plugin without custom publication implementation: mkdocs-build - everything without publication (and no grgit plugin activation) mkdocs - same as before (registers mkdocs-build plugin and configures publication tasks) mkdocsBuild task could now update existing versions file (even download from URL) (#31) To enable specify existing versions file location: mkdocs.publish.existingVersionsFile = '...' When target file not found new (empty) one would be created Ideal for incremental publishing when each publication just adds a new version to existing file (when git publication is not used) 2.4.0 (2022-06-17) \u00b6 Fix variables support for gradle 7.4 (#34) Update packages: mkdocs-material 8.2.8 -> 8.3.6 (drops python 3.6 support) pygments 2.11.2 -> 2.12.0 pymdown-extensions 9.1 -> 9.4 2.3.0 (2022-04-02) \u00b6 Update packages: mkdocs 1.2.3 -> 1.3.0 (fixes #29: jinja2 3.1.0 support) mkdocs-material 8.0.2 -> 8.2.8 pygments 2.10.0 -> 2.11.2 mkdocs-markdownextradata-plugin 0.2.4 -> 0.2.5 2.2.0 (2021-12-08) \u00b6 Update packages: mkdocs 1.1.2 -> 1.2.3 See breaking changes : site_url is now required google_analytics option deprecated - theme specific configurations used instead (see below) mkdocs-material 7.0.6 -> 8.0.2 Migration notes : instead of google_analytics extra.analytics must be used replace codehilite extension with pymdownx.highlight to activate light/dark theme toggle ( #12 ) pygments 2.8.0 -> 2.10.0 pymdown-extensions 8.1.1 -> 9.1 Update mkdocs.yaml generated by init task with most useful options commented Add support for version switcher (without mike tool usage), by generating versions.json from publish repository folders ( #10 ) New option mkdocs.publish.generateVersionsFile could disable versions.json file generation File generated by new mkdocsVersionsFile task which may be used instead of mkdocsBuild to test switcher Add aliases support (same way as in mike), declared with new option mkdocs.publish.versionAliases Add mkdocs.publish.rootRedirectTo option to be able to configure root redirection into alias 2.1.2 (2021-12-01) \u00b6 Fix java 8 support, dropped due to jgit 6 transitive dependency ( #13 ) 2.1.1 (2021-03-18) \u00b6 Fix variables support ignore 'docs_dir' configuration from mkdocs.yml ( #8 ) 2.1.0 (2021-03-17) \u00b6 Support python installed from Windows Store (use-python-plugin 2.3.0) Update packages: mkdocs 1.1 -> 1.1.2 mkdocs-material 4.6.3 -> 7.0.6 pygments 2.6.1 -> 2.8.0 pymdown-extensions 6.3.0 -> 8.1.1 Optional variables support for all mkdocs tasks: there is no (and not planned) native support for variables in mkdocs, but often it is very handful. It is only possible to have it with a plugin. ( #7 ) Added mkdocs-markdownextradata-plugin 0.2.4 as installed module (no harm, you must active it manually!) Added mkdocs.extras configuration option: map to declare additional variables When extra variables declared, plugin would generate a special file, containing all declared variables, which markdownextradata plugin would recognize and use automatically. Variables must be used with 'gradle' prefix: {{ gradle.declared_var_name }} WARNING: there were some scheme changes in mkdocs-material. Most likely you may face social links change: Before: social: - type: github link: https://github.com/xvik After: social: - icon: fontawesome/brands/github link: https://github.com/xvik See mkdocs-material upgrade guide for details 2.0.1 (2020-04-06) \u00b6 Fix relative virtualenv paths support (don't rely on gradle work dir) (#5) 2.0.0 (2020-03-13) \u00b6 (breaking) Drop java 7 support (breaking) Drop gradle 4 support Fix jgit dependency conflict (#4) (plugin now use jgit 5) Update packages: mkdocs 1.0.4 -> 1.1 mkdocs-material 3.0.4 -> 4.6.3 pygments 2.2.0 -> 2.6.1 pymdown-extensions 6.0.0 -> 6.3.0 Use gradle tasks configuration avoidance for lazy tasks initialization (no init when tasks not needed) 1.1.0 (2018-10-14) \u00b6 Default template's mkdocs.yml changes: fixed edit_uri (missed \"/docs\" ending) pages changed to nav change parameters syntax in markdown_extensions section Fix documentation in sub module support (use-python plugin 1.2.0) Support Mkdocks 1.0: Update default mkdocs 0.17.3 -> 1.0.4 Update default mkdocs-material 2.7.2 -> 3.0.4 Update default pymdown-extensions 4.9.2 -> 6.0.0 Mkdocs 1.0 migration notes (for existing docs): Rename pages section into nav Make sure site_url set correctly (otherwise sitemap will contain None instead of urls) Change markdown_extensions section from using something(arg=val) syntax into: markdown_extensions : - admonition - codehilite : guess_lang : false - footnotes - meta - toc : permalink : true - pymdownx.betterem : smart_enable : all - pymdownx.caret - pymdownx.inlinehilite - pymdownx.magiclink - pymdownx.smartsymbols - pymdownx.superfences 1.0.1 (2018-04-23) \u00b6 Fix pip 10 compatibility (use-python plugin 1.0.2) Update default mkdocs 0.17.2 -> 0.17.3 Update default mkdocs-material 2.2.1 -> 2.7.2 Update default pymdown-extensions 4.6 -> 4.9.2 1.0.0 (2017-12-30) \u00b6 Initial release","title":"Release notes"},{"location":"about/history/#300-2022-11-01","text":"(breaking) Drop gradle 5.0-5.2 support (minimum required gradle is 5.3) Python plugin related changes: Add docker support (with raw python container by default) Add python requirements.txt file support Add cleanPython task to easily cleanup local environment Dev server port number is now configurable: devPort property (this required for proper docker support when non-local ip must be specified) mkdocs.resolveDocPath() never return null: for single version docs '.' is returned now instead of null (#41) Update packages: mkdocs 1.3.0 -> 1.4.1 mkdocs-material 8.3.6 -> 8.5.7 pygments 2.12.0 -> 2.13.0 pymdown-extensions 9.4 -> 9.7 Ignore all git errors during plugin initialization (git used to resolve repoUrl on initialization) (#45) Split plugin into 2 plugins to let users use plugin without custom publication implementation: mkdocs-build - everything without publication (and no grgit plugin activation) mkdocs - same as before (registers mkdocs-build plugin and configures publication tasks) mkdocsBuild task could now update existing versions file (even download from URL) (#31) To enable specify existing versions file location: mkdocs.publish.existingVersionsFile = '...' When target file not found new (empty) one would be created Ideal for incremental publishing when each publication just adds a new version to existing file (when git publication is not used)","title":"3.0.0 (2022-11-01)"},{"location":"about/history/#240-2022-06-17","text":"Fix variables support for gradle 7.4 (#34) Update packages: mkdocs-material 8.2.8 -> 8.3.6 (drops python 3.6 support) pygments 2.11.2 -> 2.12.0 pymdown-extensions 9.1 -> 9.4","title":"2.4.0 (2022-06-17)"},{"location":"about/history/#230-2022-04-02","text":"Update packages: mkdocs 1.2.3 -> 1.3.0 (fixes #29: jinja2 3.1.0 support) mkdocs-material 8.0.2 -> 8.2.8 pygments 2.10.0 -> 2.11.2 mkdocs-markdownextradata-plugin 0.2.4 -> 0.2.5","title":"2.3.0 (2022-04-02)"},{"location":"about/history/#220-2021-12-08","text":"Update packages: mkdocs 1.1.2 -> 1.2.3 See breaking changes : site_url is now required google_analytics option deprecated - theme specific configurations used instead (see below) mkdocs-material 7.0.6 -> 8.0.2 Migration notes : instead of google_analytics extra.analytics must be used replace codehilite extension with pymdownx.highlight to activate light/dark theme toggle ( #12 ) pygments 2.8.0 -> 2.10.0 pymdown-extensions 8.1.1 -> 9.1 Update mkdocs.yaml generated by init task with most useful options commented Add support for version switcher (without mike tool usage), by generating versions.json from publish repository folders ( #10 ) New option mkdocs.publish.generateVersionsFile could disable versions.json file generation File generated by new mkdocsVersionsFile task which may be used instead of mkdocsBuild to test switcher Add aliases support (same way as in mike), declared with new option mkdocs.publish.versionAliases Add mkdocs.publish.rootRedirectTo option to be able to configure root redirection into alias","title":"2.2.0 (2021-12-08)"},{"location":"about/history/#212-2021-12-01","text":"Fix java 8 support, dropped due to jgit 6 transitive dependency ( #13 )","title":"2.1.2 (2021-12-01)"},{"location":"about/history/#211-2021-03-18","text":"Fix variables support ignore 'docs_dir' configuration from mkdocs.yml ( #8 )","title":"2.1.1 (2021-03-18)"},{"location":"about/history/#210-2021-03-17","text":"Support python installed from Windows Store (use-python-plugin 2.3.0) Update packages: mkdocs 1.1 -> 1.1.2 mkdocs-material 4.6.3 -> 7.0.6 pygments 2.6.1 -> 2.8.0 pymdown-extensions 6.3.0 -> 8.1.1 Optional variables support for all mkdocs tasks: there is no (and not planned) native support for variables in mkdocs, but often it is very handful. It is only possible to have it with a plugin. ( #7 ) Added mkdocs-markdownextradata-plugin 0.2.4 as installed module (no harm, you must active it manually!) Added mkdocs.extras configuration option: map to declare additional variables When extra variables declared, plugin would generate a special file, containing all declared variables, which markdownextradata plugin would recognize and use automatically. Variables must be used with 'gradle' prefix: {{ gradle.declared_var_name }} WARNING: there were some scheme changes in mkdocs-material. Most likely you may face social links change: Before: social: - type: github link: https://github.com/xvik After: social: - icon: fontawesome/brands/github link: https://github.com/xvik See mkdocs-material upgrade guide for details","title":"2.1.0 (2021-03-17)"},{"location":"about/history/#201-2020-04-06","text":"Fix relative virtualenv paths support (don't rely on gradle work dir) (#5)","title":"2.0.1 (2020-04-06)"},{"location":"about/history/#200-2020-03-13","text":"(breaking) Drop java 7 support (breaking) Drop gradle 4 support Fix jgit dependency conflict (#4) (plugin now use jgit 5) Update packages: mkdocs 1.0.4 -> 1.1 mkdocs-material 3.0.4 -> 4.6.3 pygments 2.2.0 -> 2.6.1 pymdown-extensions 6.0.0 -> 6.3.0 Use gradle tasks configuration avoidance for lazy tasks initialization (no init when tasks not needed)","title":"2.0.0 (2020-03-13)"},{"location":"about/history/#110-2018-10-14","text":"Default template's mkdocs.yml changes: fixed edit_uri (missed \"/docs\" ending) pages changed to nav change parameters syntax in markdown_extensions section Fix documentation in sub module support (use-python plugin 1.2.0) Support Mkdocks 1.0: Update default mkdocs 0.17.3 -> 1.0.4 Update default mkdocs-material 2.7.2 -> 3.0.4 Update default pymdown-extensions 4.9.2 -> 6.0.0 Mkdocs 1.0 migration notes (for existing docs): Rename pages section into nav Make sure site_url set correctly (otherwise sitemap will contain None instead of urls) Change markdown_extensions section from using something(arg=val) syntax into: markdown_extensions : - admonition - codehilite : guess_lang : false - footnotes - meta - toc : permalink : true - pymdownx.betterem : smart_enable : all - pymdownx.caret - pymdownx.inlinehilite - pymdownx.magiclink - pymdownx.smartsymbols - pymdownx.superfences","title":"1.1.0 (2018-10-14)"},{"location":"about/history/#101-2018-04-23","text":"Fix pip 10 compatibility (use-python plugin 1.0.2) Update default mkdocs 0.17.2 -> 0.17.3 Update default mkdocs-material 2.2.1 -> 2.7.2 Update default pymdown-extensions 4.6 -> 4.9.2","title":"1.0.1 (2018-04-23)"},{"location":"about/history/#100-2017-12-30","text":"Initial release","title":"1.0.0 (2017-12-30)"},{"location":"about/license/","text":"The MIT License (MIT) Copyright \u00a9 2017-2022, Vyacheslav Rusakov Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"about/migration/","text":"Migration notes \u00b6 Summary This section mostly describes main changes in updated mkdocs and material versions, assuming you'll use default versions (provided by plugin). 3.0.0 \u00b6 Gradle 5.0-5.2 is not supported anymore. Use python 3.8 and above: there might be problem with importlib-metadata 5.0 package installed by version range (transitive dependency) and incompatible with python < 3.8 Plugin can use docker now instead of local python: mkdocs.docker.use = true New configuration mkdocs.devPort overrides dev_addr configuration in your mkdocs.yml (this was required for proper docker support). If you need to change default port (3000), use gradle config to change it If you don't need git publication tasks, you can now use lightweight plugin version: id 'ru.vyarus.mkdocs-build' version '3.0.0' There is also a way now to update existing versions.json file in case when git publication not used: configure current file location with mkdocs.publish.existingVersionsFile = 'https://xvik.github.io/gradle-mkdocs-plugin/versions.json' (or local path) and mkdocsBuild would generate updated versions.json inside mkdocs build dir. 2.4.0 \u00b6 Python 3.6 is not supported anymore, use python 3.7 - 3.10. 2.3.0 \u00b6 There is no breaking changes since 2.2.0, but if you're migrating from earlier version please see 2.2.0 migration notes .","title":"Migration notes"},{"location":"about/migration/#migration-notes","text":"Summary This section mostly describes main changes in updated mkdocs and material versions, assuming you'll use default versions (provided by plugin).","title":"Migration notes"},{"location":"about/migration/#300","text":"Gradle 5.0-5.2 is not supported anymore. Use python 3.8 and above: there might be problem with importlib-metadata 5.0 package installed by version range (transitive dependency) and incompatible with python < 3.8 Plugin can use docker now instead of local python: mkdocs.docker.use = true New configuration mkdocs.devPort overrides dev_addr configuration in your mkdocs.yml (this was required for proper docker support). If you need to change default port (3000), use gradle config to change it If you don't need git publication tasks, you can now use lightweight plugin version: id 'ru.vyarus.mkdocs-build' version '3.0.0' There is also a way now to update existing versions.json file in case when git publication not used: configure current file location with mkdocs.publish.existingVersionsFile = 'https://xvik.github.io/gradle-mkdocs-plugin/versions.json' (or local path) and mkdocsBuild would generate updated versions.json inside mkdocs build dir.","title":"3.0.0"},{"location":"about/migration/#240","text":"Python 3.6 is not supported anymore, use python 3.7 - 3.10.","title":"2.4.0"},{"location":"about/migration/#230","text":"There is no breaking changes since 2.2.0, but if you're migrating from earlier version please see 2.2.0 migration notes .","title":"2.3.0"},{"location":"guide/configuration/","text":"Configuration \u00b6 Important Plugin based on python plugin which manage all python-relates staff like virtualenv creation, pip installation and python executions. For python-related configurations refer to python plugin documentation Tip For docker configuration see python plugin documentation Important There are two plugin versions: ru.vyarus.mkdocs - full plugin ru.vyarus.mkdocs-build - without publication tasks (lightweight) Both versions are equal in functionality, except publication stage. Configuration properties with default values: mkdocs { // mkdocs sources sourcesDir = 'src/doc' // strict build (fail on build errors) strict = true // target build directory (publication root) buildDir = 'build/mkdocs' // automatically update site_url in mkdocs.yml before mkdocsBuild updateSiteUrl = true // optional variables declaration (to bypass gradle data to docs) extras = [:] // dev server port (mkdocsServe task), overrides dev_addr from mkdocs.yml devPort = 3000 publish { // publication sub-folder (by default project version) docPath = '$version' // generate versions.json file for versions switcher // [used by publication task] generateVersionsFile = true // specify path to or URL to existing versions.json file in order to update it (add new version); // executed by mkdocsBuild, suitable when git publication not used existingVersionsFile // custom version name shown in version switcher (by default version folder name) versionTitle = '$docPath' // one or more alias folders to copy generated docs to (e.g. 'latest' or 'dev') versionAliases = [] // generate index.html' for root redirection to the last published version rootRedirect = true // allows changing root redirection to alias folder instead of exact version rootRedirectTo = '$docPath' // publish repository uri (bu default the same as current repository) // [used by publication task] repoUri = null // publication branch // [used by publication task] branch = 'gh-pages' // publication comment // [used by publication task] comment = 'Publish $docPath documentation' // directory publication repository checkout, update and push // [used by publication task] repoDir = '.gradle/gh-pages' } } Tip Options marked as [used by publication task] used ONLY during publication and so would be ignored when build-only plugin version ( ru.vyarus.mkdocs-build ) used. Not marked publication propeties used by mkdocsBuild By default: All documentation sources located in src/doc (and mkdocsInit task generate stubs there) mkdocsBuild task will build site into build/mkdocs Current project version is used as documentation folder ( build/mkdocs/$version ) Github repository is assumed by default, so publication will be performed into gh-pages branch (where github will automatically detect it) Variables plugin is not configured. See variables section for details. Note In order to include something else into published docks (e.g. javadoc) see publication . Single version site \u00b6 If you don't want to use multi-version support at all then: mkdocs.publish.docPath = '' // or null This way, mkdocs site will always be published at the root (in case of publish it will always replace previous site version). Docs as module \u00b6 Example of moving documentation into separate gradle module: plugins { id 'ru.vyarus.mkdocs' version '3.0.0' apply false } version = '1.0-SNAPSHOT' project ( ':doc' ) { apply plugin: 'ru.vyarus.mkdocs' mkdocs { sourcesDir = 'src' } } Default docs location simplified to simple src because of no other sources in this module. If we call :doc:mkdocsInit it will generate documentation stubs like this: Project structure: / /doc/ src/ docs/ ... index.md mkdocs.yml build.gradle settings.gradle For simplicity, gradle configuration for doc module is declared in the main file, but it could be declared inside doc's own build.gradle.","title":"Configuration"},{"location":"guide/configuration/#configuration","text":"Important Plugin based on python plugin which manage all python-relates staff like virtualenv creation, pip installation and python executions. For python-related configurations refer to python plugin documentation Tip For docker configuration see python plugin documentation Important There are two plugin versions: ru.vyarus.mkdocs - full plugin ru.vyarus.mkdocs-build - without publication tasks (lightweight) Both versions are equal in functionality, except publication stage. Configuration properties with default values: mkdocs { // mkdocs sources sourcesDir = 'src/doc' // strict build (fail on build errors) strict = true // target build directory (publication root) buildDir = 'build/mkdocs' // automatically update site_url in mkdocs.yml before mkdocsBuild updateSiteUrl = true // optional variables declaration (to bypass gradle data to docs) extras = [:] // dev server port (mkdocsServe task), overrides dev_addr from mkdocs.yml devPort = 3000 publish { // publication sub-folder (by default project version) docPath = '$version' // generate versions.json file for versions switcher // [used by publication task] generateVersionsFile = true // specify path to or URL to existing versions.json file in order to update it (add new version); // executed by mkdocsBuild, suitable when git publication not used existingVersionsFile // custom version name shown in version switcher (by default version folder name) versionTitle = '$docPath' // one or more alias folders to copy generated docs to (e.g. 'latest' or 'dev') versionAliases = [] // generate index.html' for root redirection to the last published version rootRedirect = true // allows changing root redirection to alias folder instead of exact version rootRedirectTo = '$docPath' // publish repository uri (bu default the same as current repository) // [used by publication task] repoUri = null // publication branch // [used by publication task] branch = 'gh-pages' // publication comment // [used by publication task] comment = 'Publish $docPath documentation' // directory publication repository checkout, update and push // [used by publication task] repoDir = '.gradle/gh-pages' } } Tip Options marked as [used by publication task] used ONLY during publication and so would be ignored when build-only plugin version ( ru.vyarus.mkdocs-build ) used. Not marked publication propeties used by mkdocsBuild By default: All documentation sources located in src/doc (and mkdocsInit task generate stubs there) mkdocsBuild task will build site into build/mkdocs Current project version is used as documentation folder ( build/mkdocs/$version ) Github repository is assumed by default, so publication will be performed into gh-pages branch (where github will automatically detect it) Variables plugin is not configured. See variables section for details. Note In order to include something else into published docks (e.g. javadoc) see publication .","title":"Configuration"},{"location":"guide/configuration/#single-version-site","text":"If you don't want to use multi-version support at all then: mkdocs.publish.docPath = '' // or null This way, mkdocs site will always be published at the root (in case of publish it will always replace previous site version).","title":"Single version site"},{"location":"guide/configuration/#docs-as-module","text":"Example of moving documentation into separate gradle module: plugins { id 'ru.vyarus.mkdocs' version '3.0.0' apply false } version = '1.0-SNAPSHOT' project ( ':doc' ) { apply plugin: 'ru.vyarus.mkdocs' mkdocs { sourcesDir = 'src' } } Default docs location simplified to simple src because of no other sources in this module. If we call :doc:mkdocsInit it will generate documentation stubs like this: Project structure: / /doc/ src/ docs/ ... index.md mkdocs.yml build.gradle settings.gradle For simplicity, gradle configuration for doc module is declared in the main file, but it could be declared inside doc's own build.gradle.","title":"Docs as module"},{"location":"guide/multi-version/","text":"Multi-version documentation \u00b6 By default, plugin assume multi-version documentation publishing. Configuration, responsible for versioning: mkdocs . publish { docPath = '$version' rootRedirect = true rootRedirectTo = '$docPath' versionTitle = '$docPath' versionAliases = [] generateVersionsFile = true } Tip Usually it is more handy to manually set current doc version and not rely on project version because often documentation for currently released version is updated multiple times after release. Important Mkdocs-material suggests mike tool usage for publication. Gradle plugin implements absolutely the same workflow as mike, but much easier customizable (as gradle plugin). Material theme would still be able to show version switcher because plugin generates required versions.json file. Workflow \u00b6 Usually you work on documentation for current version only. When new version released - you publish new documentation version and continue evolving it. Old version stays published for the legacy users. Older version update \u00b6 When older documentation version needs to be updated switch off redirection index.html generation (so it would not override redirection to the latest version): mkdocs . publish { docPath = '0.9' rootRedirect = false // site root must still redirect to '1.0' (assume it's already published) } Will build (without root index.html): build/mkdocs/ /0.9/ - mkdocs site for old version Also, do not use versionAliases when publishing old version because it may override more recent docs version. Plugin would try to warn you in such cases: WARNING : Publishing version ' 1.0 ' is older then the latest published ' 1.1 ' and the following overrides might not be desired : root redirect override to ' 1.0 ' existing alias ' latest ' override existing alias ' 1. x ' override Important This warning is produced by mkdocsVersionsFile file and only when versions.json file generation is not disabled. This check can't be done under mkdocsBuild because publishing repository is required for validation. So please, when releasing an old version use mkdocsVersionsFile to see all possible warnings before actual publication. Publication layouts \u00b6 You may define whatever layout you want, e.g.: mkdocs.publish.docPath = 'en/1.0/' Here generated site will be published into /en/1.0/ folder (not just version) and index.html generated at the root with correct redirection. Warning If you want to use version switcher then you should not use long version paths, because mkdocs-material would look for versions file only at one level up . Aliases \u00b6 It is possible to publish version not only into version folder, but also into aliased folders. Could be useful for: Publishing the latest documentation under latest alias, so users could always reference the latest docs with the same link. Publishing docs for developing version under dev alias, so users could easily find dev docs. Serving the latest (patch) version for some mojor version: e.g. 5.x alias could serve the latest published bugfix. For example, to add latest alias: mkdocs . publish { docPath = '1.0' rootRedirect = true versionAliases = [ 'latest' ] } Will build: build/mkdocs/ /0.9/ /latest/ index.html Note Alias folder contains a copy of generated documentation, which means that sitemap links would lead to path of exact version. If same version is re-published - aliases would be correctly updated too. It is also possible to redirect root into alias instead of exact version with rootRedirectTo option: mkdocs . publish { versionAliases = [ 'latest' ] rootRedirectTo = 'latest' } Tip In case of root redirection to alias it is better to enable version switcher to clearly show what version is active now (otherwise it would be not obvious) Doc version switcher \u00b6 Version switcher might be enabled in mkdocs.yml exactly as described in docs : extra : version : provider : mike Important You don't need mike itself! Important You will not see switcher under mkdocsServe command, but if you call mkdocsVersionsFile (which would also call mkdocsBuild ), and manually open new version it would show switcher with all versions (using generated versions.json) Mkdocs-material requires only versions.json file stored at docs root. Plugin would automatically generate such file (following mike syntax): Plugin verifies actually existing directories in gh-pages repository and would add them to generated versions file. So if you already have many versions published, just publish new version with enabled versions support and you'll see all of them in the version switcher. Theme folders are detected by using \\d+(\\..*)? regexp (version folder must start with a number) and it must contain 404.html file. Deeper versions folders are also supported: e.g. if mkdocs.publish.docPath = 'en/1.0/' then `en/1.0' folder would be recognized as version Existing records in versions.json file are preserved for found version folders. You can modify file manually (e.g. to modify version title) and it will not be overridden on next publication You can manually remove version folder in repository and on next publication versions.json would be corrected If aliases used, they would be correctly updated (e.g. latest removed from previous latest version.) If you do not want to generate versions file: mkdocs.publish.generateVersionsFile = false To customize version title (shown in dropdown selection) use: mkdocs.publish.versionTitle = '1.0 (important fix)' Incremental versions \u00b6 There is an alternative way for versions.json file generation for cases when publishing task is not used (e.g. when lightweight ru.vyarus.mkdocs-build plugin used). The idea is to use existing versions file and add new version into it (in contrast, git based publication could detect removed version folders and remove versions from file accordingly). Tip Version aliases would be also correctly processed. To enable incremental versions generation, specify current versions file location: mkdocs . publish . existingVersionsFile = 'path/to/actual/versions.json' You can also use a URL (http, ftp or anything that URL could handle): mkdocs . publish . existingVersionsFile = 'https://xvik.github.io/gradle-mkdocs-plugin/versions.json' When file specified, mkdocsBuild would load current file and apply new version there (if required). Updated versions file would be available in target build directory (same as with git publication). Important There will not be an error if file not found or due to download error - instead plugin would consider current file as not existing and would create a fresh versions file. This is useful for the first publication. Note When git publication used, incremental versions file, generated by mkdocsBuild would be overridden by versions file, generated by publishing task. If required, it could be disabled with mkdocs.publish.generateVersionsFile = false , but keep in mind that publication mechanism is safer to use.","title":"Multi-version"},{"location":"guide/multi-version/#multi-version-documentation","text":"By default, plugin assume multi-version documentation publishing. Configuration, responsible for versioning: mkdocs . publish { docPath = '$version' rootRedirect = true rootRedirectTo = '$docPath' versionTitle = '$docPath' versionAliases = [] generateVersionsFile = true } Tip Usually it is more handy to manually set current doc version and not rely on project version because often documentation for currently released version is updated multiple times after release. Important Mkdocs-material suggests mike tool usage for publication. Gradle plugin implements absolutely the same workflow as mike, but much easier customizable (as gradle plugin). Material theme would still be able to show version switcher because plugin generates required versions.json file.","title":"Multi-version documentation"},{"location":"guide/multi-version/#workflow","text":"Usually you work on documentation for current version only. When new version released - you publish new documentation version and continue evolving it. Old version stays published for the legacy users.","title":"Workflow"},{"location":"guide/multi-version/#older-version-update","text":"When older documentation version needs to be updated switch off redirection index.html generation (so it would not override redirection to the latest version): mkdocs . publish { docPath = '0.9' rootRedirect = false // site root must still redirect to '1.0' (assume it's already published) } Will build (without root index.html): build/mkdocs/ /0.9/ - mkdocs site for old version Also, do not use versionAliases when publishing old version because it may override more recent docs version. Plugin would try to warn you in such cases: WARNING : Publishing version ' 1.0 ' is older then the latest published ' 1.1 ' and the following overrides might not be desired : root redirect override to ' 1.0 ' existing alias ' latest ' override existing alias ' 1. x ' override Important This warning is produced by mkdocsVersionsFile file and only when versions.json file generation is not disabled. This check can't be done under mkdocsBuild because publishing repository is required for validation. So please, when releasing an old version use mkdocsVersionsFile to see all possible warnings before actual publication.","title":"Older version update"},{"location":"guide/multi-version/#publication-layouts","text":"You may define whatever layout you want, e.g.: mkdocs.publish.docPath = 'en/1.0/' Here generated site will be published into /en/1.0/ folder (not just version) and index.html generated at the root with correct redirection. Warning If you want to use version switcher then you should not use long version paths, because mkdocs-material would look for versions file only at one level up .","title":"Publication layouts"},{"location":"guide/multi-version/#aliases","text":"It is possible to publish version not only into version folder, but also into aliased folders. Could be useful for: Publishing the latest documentation under latest alias, so users could always reference the latest docs with the same link. Publishing docs for developing version under dev alias, so users could easily find dev docs. Serving the latest (patch) version for some mojor version: e.g. 5.x alias could serve the latest published bugfix. For example, to add latest alias: mkdocs . publish { docPath = '1.0' rootRedirect = true versionAliases = [ 'latest' ] } Will build: build/mkdocs/ /0.9/ /latest/ index.html Note Alias folder contains a copy of generated documentation, which means that sitemap links would lead to path of exact version. If same version is re-published - aliases would be correctly updated too. It is also possible to redirect root into alias instead of exact version with rootRedirectTo option: mkdocs . publish { versionAliases = [ 'latest' ] rootRedirectTo = 'latest' } Tip In case of root redirection to alias it is better to enable version switcher to clearly show what version is active now (otherwise it would be not obvious)","title":"Aliases"},{"location":"guide/multi-version/#doc-version-switcher","text":"Version switcher might be enabled in mkdocs.yml exactly as described in docs : extra : version : provider : mike Important You don't need mike itself! Important You will not see switcher under mkdocsServe command, but if you call mkdocsVersionsFile (which would also call mkdocsBuild ), and manually open new version it would show switcher with all versions (using generated versions.json) Mkdocs-material requires only versions.json file stored at docs root. Plugin would automatically generate such file (following mike syntax): Plugin verifies actually existing directories in gh-pages repository and would add them to generated versions file. So if you already have many versions published, just publish new version with enabled versions support and you'll see all of them in the version switcher. Theme folders are detected by using \\d+(\\..*)? regexp (version folder must start with a number) and it must contain 404.html file. Deeper versions folders are also supported: e.g. if mkdocs.publish.docPath = 'en/1.0/' then `en/1.0' folder would be recognized as version Existing records in versions.json file are preserved for found version folders. You can modify file manually (e.g. to modify version title) and it will not be overridden on next publication You can manually remove version folder in repository and on next publication versions.json would be corrected If aliases used, they would be correctly updated (e.g. latest removed from previous latest version.) If you do not want to generate versions file: mkdocs.publish.generateVersionsFile = false To customize version title (shown in dropdown selection) use: mkdocs.publish.versionTitle = '1.0 (important fix)'","title":"Doc version switcher"},{"location":"guide/multi-version/#incremental-versions","text":"There is an alternative way for versions.json file generation for cases when publishing task is not used (e.g. when lightweight ru.vyarus.mkdocs-build plugin used). The idea is to use existing versions file and add new version into it (in contrast, git based publication could detect removed version folders and remove versions from file accordingly). Tip Version aliases would be also correctly processed. To enable incremental versions generation, specify current versions file location: mkdocs . publish . existingVersionsFile = 'path/to/actual/versions.json' You can also use a URL (http, ftp or anything that URL could handle): mkdocs . publish . existingVersionsFile = 'https://xvik.github.io/gradle-mkdocs-plugin/versions.json' When file specified, mkdocsBuild would load current file and apply new version there (if required). Updated versions file would be available in target build directory (same as with git publication). Important There will not be an error if file not found or due to download error - instead plugin would consider current file as not existing and would create a fresh versions file. This is useful for the first publication. Note When git publication used, incremental versions file, generated by mkdocsBuild would be overridden by versions file, generated by publishing task. If required, it could be disabled with mkdocs.publish.generateVersionsFile = false , but keep in mind that publication mechanism is safer to use.","title":"Incremental versions"},{"location":"guide/pip/","text":"Pip modules \u00b6 Plugin will install by default the following pip modules: mkdocs:1.4.1 mkdocs-material:8.5.7 pygments:2.13.0 pymdown-extensions:9.7 mkdocs-markdownextradata-plugin:0.2.5 By default, modules are installed into project specific virtualenv (located in .gradle/python ). You can see all installed modules with pipList task. If you want to use other python modules (e.g. other theme): python . pip 'other-module:12' , 'and-other:1.0' Also, you can override default modules versions: python . pip 'mkdocs:1.1' And even downgrade: python . pip 'mkdocs:1.0.3' Tip All default modules are simply implicitly configured in python.pip and any manual module declaration will override the default. Read more about possible pip modules configuration in python plugin documentation Note You can also use requirements.txt file for version management. Read more in python plugin documentation You can use pipUpdates task to check if newer module versions are available .","title":"Pip"},{"location":"guide/pip/#pip-modules","text":"Plugin will install by default the following pip modules: mkdocs:1.4.1 mkdocs-material:8.5.7 pygments:2.13.0 pymdown-extensions:9.7 mkdocs-markdownextradata-plugin:0.2.5 By default, modules are installed into project specific virtualenv (located in .gradle/python ). You can see all installed modules with pipList task. If you want to use other python modules (e.g. other theme): python . pip 'other-module:12' , 'and-other:1.0' Also, you can override default modules versions: python . pip 'mkdocs:1.1' And even downgrade: python . pip 'mkdocs:1.0.3' Tip All default modules are simply implicitly configured in python.pip and any manual module declaration will override the default. Read more about possible pip modules configuration in python plugin documentation Note You can also use requirements.txt file for version management. Read more in python plugin documentation You can use pipUpdates task to check if newer module versions are available .","title":"Pip modules"},{"location":"guide/publication/","text":"Publication \u00b6 Note Plugin does not use mkdocs publication , because it does not support multi-versioning. Instead, git-publish plugin is used for publication. Note Mkdocs-material suggests mike tool usage for publication. Gradle plugin implements absolutely the same workflow as mike, but much easier customizable (as gradle plugin). Material theme would still be able to show version switcher because plugin generates required versions.json file. Tip There is a special lightweight plugin version without publication tasks (and git-publish plugin registration): ru.vyarus.mkdocs-build . Might be useful if you publish docs in a different way (e.g. with ftp). By default, no configuration is required. Only project itself must be published to git so that plugin could calculate default url (or mkdocs.publish.repoUrl manually specified). On the first mkdocsPublish task call: gh-pages branch will be created in the same repo built site pushed to gh-pages repository branch Later mkdocsPublish task calls will only remove current version folder (replace with the new one) or publish completely new version only. You can find actual gh-pages branch inside .gradle/gh-pages (this checkout is used for publishing). Gradle folder is used to cache repository checkout because eventually it would contain many versions and there is no need to checkout all of them each time (folder could be changed with mkdocs.publish.repoDir ). Authentication \u00b6 By default, git-publish will ask credentials with a popup (swing). Even if github pages are published on the same repo, the repo is checked out into different folder and so current repository credentials can't be used automatically. You can specify credentials as: Environment variables: GRGIT_USER (could be github token ), GRGIT_PASS System properties: org.ajoberstar.grgit.auth.username (could be github token), org.ajoberstar.grgit.auth.password Ssh key properties: org.ajoberstar.grgit.auth.ssh.private (path to key), org.ajoberstar.grgit.auth.ssh.passphrase See details in grgit docs . Plugin will automatically bind gradle properties org.ajoberstar.grgit.auth.* to system properties (just before gitPublishReset ). This allows you to define credentials as global gradle properties in ~/.gradle/gradle.properties : org.ajoberstar.grgit.auth.username = user org.ajoberstar.grgit.auth.password = pass For testing, you can define properties inside gradle script: ext [ 'org.ajoberstar.grgit.auth.username' ] = 'user' ext [ 'org.ajoberstar.grgit.auth.password' ] = 'pass' Publish additional resources \u00b6 If you want to publish not only generated site, but something else too then configure git-publish plugin to include additional content. For example, to include javadoc: gitPublish . contents { from ( javadoc ) { // need to use resolveDocPath because by default it's a template into \"${mkdocs.resolveDocPath()}/javadoc\" } } // dependency will NOT be set automatically by copySpec above gitPublishReset . dependsOn javadoc Note When multi-version publishing is not used ( mkdocs.publish.docPath set to null) ${mkdocs.resolveDocPath()}/ would be resolved as ./ and so path would work properly in both modes. With this configuration, calling mkdocsPublish will publish generated mkdocs site with extra javadoc folder inside (you can put relative link to it inside documentation). Advanced publishing configuration \u00b6 To be able to configure advanced cases, you need to understand how everything works in detail. Here is how git-publish plugin is configured by default: gitPublish { repoUri = mkdocs . publish . repoUri branch = mkdocs . publish . branch repoDir = file ( mkdocs . publish . repoDir ) commitMessage = mkdocs . publish . comment contents { from ( \"${mkdocs.buildDir}\" ) } if ( multi_version_publish ) { preserve { include '**' exclude \"${mkdocs.publish.docPath}/**\" } } } Customized tasks dependency chain: mkdocsBuild <- gitPublishReset <- gitPublishCopy <- gitPublishCommit <- gitPublishPush <- mkdocsPublish Publication process: mkdocsBuild build site into $mkdocs.buildDir/$mkdocs.publish.docPath (by default, build/mkdocs/$version/ ) root redirect index.html generated (by default, build/mkdocs/index.html ) if required, alias folders would be generated too (by copying generated version content) gitPublishReset clones gh-pages repo (by default, into .gradle/gh-pages ) or creates new one cleanup repo according to gitPublish.preserve (by default, .gradle/gh-pages/$version/ folder removed only) mkdocsVersionsFile generates versions.json file based on version folders checked out from gh-pages repository (file generated in $mkdocs.buildDir ) gitPublishCopy copies everything according to gitPublish.contents (by default, everything from build/mkdocs ) gitPublishCommit , gitPublishPush - commit changes and push to gh-pages repository (by default, gh-pages branch in current repo) You can configure additional folders for publication with contents (as shown above with javadoc) and cleanup extra directories with preserve configuration. For example: gitPublish { contents { from 'build/custom-dir' { into 'custom-dir' } } preserve { exclude 'custom-dir' } } Here extra build/custom-dir directory added for publication (into custom-dir ) and previous custom-dir folder (already committed) will be removed before publication. site_url \u00b6 site_url configuration defined in mkdocs.yml should point to the site root. It may be github pages or some custom domain. Setting affect home icon link, page metadata and links in generated sitemap.xml. When multi-version publishing used (by default), this url must point to documentation version folder (otherwise links will be incorrect in the sitemap). To avoid manual changes, just configure root site url (e.g. http://myroot.com/ ) and plugin will automatically change site_url before mkdocsBuild (for example, to http://myroot.com/1.0/ ; see build log - it will show updated url). Config is reverted back after the task, so you will not have to commit or revert changes. If site_url option is not defined at all (or multi-version publishing is not enabled) then config will not be changed. You can disable automatic configuration changes: mkdocs . updateSiteUrl = false Note that mkdocsServe is not affected (will generate with the original site_url) because it is not important for documentation writing (you can always call mkdocsBuild and validate urls correctness).","title":"Publication"},{"location":"guide/publication/#publication","text":"Note Plugin does not use mkdocs publication , because it does not support multi-versioning. Instead, git-publish plugin is used for publication. Note Mkdocs-material suggests mike tool usage for publication. Gradle plugin implements absolutely the same workflow as mike, but much easier customizable (as gradle plugin). Material theme would still be able to show version switcher because plugin generates required versions.json file. Tip There is a special lightweight plugin version without publication tasks (and git-publish plugin registration): ru.vyarus.mkdocs-build . Might be useful if you publish docs in a different way (e.g. with ftp). By default, no configuration is required. Only project itself must be published to git so that plugin could calculate default url (or mkdocs.publish.repoUrl manually specified). On the first mkdocsPublish task call: gh-pages branch will be created in the same repo built site pushed to gh-pages repository branch Later mkdocsPublish task calls will only remove current version folder (replace with the new one) or publish completely new version only. You can find actual gh-pages branch inside .gradle/gh-pages (this checkout is used for publishing). Gradle folder is used to cache repository checkout because eventually it would contain many versions and there is no need to checkout all of them each time (folder could be changed with mkdocs.publish.repoDir ).","title":"Publication"},{"location":"guide/publication/#authentication","text":"By default, git-publish will ask credentials with a popup (swing). Even if github pages are published on the same repo, the repo is checked out into different folder and so current repository credentials can't be used automatically. You can specify credentials as: Environment variables: GRGIT_USER (could be github token ), GRGIT_PASS System properties: org.ajoberstar.grgit.auth.username (could be github token), org.ajoberstar.grgit.auth.password Ssh key properties: org.ajoberstar.grgit.auth.ssh.private (path to key), org.ajoberstar.grgit.auth.ssh.passphrase See details in grgit docs . Plugin will automatically bind gradle properties org.ajoberstar.grgit.auth.* to system properties (just before gitPublishReset ). This allows you to define credentials as global gradle properties in ~/.gradle/gradle.properties : org.ajoberstar.grgit.auth.username = user org.ajoberstar.grgit.auth.password = pass For testing, you can define properties inside gradle script: ext [ 'org.ajoberstar.grgit.auth.username' ] = 'user' ext [ 'org.ajoberstar.grgit.auth.password' ] = 'pass'","title":"Authentication"},{"location":"guide/publication/#publish-additional-resources","text":"If you want to publish not only generated site, but something else too then configure git-publish plugin to include additional content. For example, to include javadoc: gitPublish . contents { from ( javadoc ) { // need to use resolveDocPath because by default it's a template into \"${mkdocs.resolveDocPath()}/javadoc\" } } // dependency will NOT be set automatically by copySpec above gitPublishReset . dependsOn javadoc Note When multi-version publishing is not used ( mkdocs.publish.docPath set to null) ${mkdocs.resolveDocPath()}/ would be resolved as ./ and so path would work properly in both modes. With this configuration, calling mkdocsPublish will publish generated mkdocs site with extra javadoc folder inside (you can put relative link to it inside documentation).","title":"Publish additional resources"},{"location":"guide/publication/#advanced-publishing-configuration","text":"To be able to configure advanced cases, you need to understand how everything works in detail. Here is how git-publish plugin is configured by default: gitPublish { repoUri = mkdocs . publish . repoUri branch = mkdocs . publish . branch repoDir = file ( mkdocs . publish . repoDir ) commitMessage = mkdocs . publish . comment contents { from ( \"${mkdocs.buildDir}\" ) } if ( multi_version_publish ) { preserve { include '**' exclude \"${mkdocs.publish.docPath}/**\" } } } Customized tasks dependency chain: mkdocsBuild <- gitPublishReset <- gitPublishCopy <- gitPublishCommit <- gitPublishPush <- mkdocsPublish Publication process: mkdocsBuild build site into $mkdocs.buildDir/$mkdocs.publish.docPath (by default, build/mkdocs/$version/ ) root redirect index.html generated (by default, build/mkdocs/index.html ) if required, alias folders would be generated too (by copying generated version content) gitPublishReset clones gh-pages repo (by default, into .gradle/gh-pages ) or creates new one cleanup repo according to gitPublish.preserve (by default, .gradle/gh-pages/$version/ folder removed only) mkdocsVersionsFile generates versions.json file based on version folders checked out from gh-pages repository (file generated in $mkdocs.buildDir ) gitPublishCopy copies everything according to gitPublish.contents (by default, everything from build/mkdocs ) gitPublishCommit , gitPublishPush - commit changes and push to gh-pages repository (by default, gh-pages branch in current repo) You can configure additional folders for publication with contents (as shown above with javadoc) and cleanup extra directories with preserve configuration. For example: gitPublish { contents { from 'build/custom-dir' { into 'custom-dir' } } preserve { exclude 'custom-dir' } } Here extra build/custom-dir directory added for publication (into custom-dir ) and previous custom-dir folder (already committed) will be removed before publication.","title":"Advanced publishing configuration"},{"location":"guide/publication/#site_url","text":"site_url configuration defined in mkdocs.yml should point to the site root. It may be github pages or some custom domain. Setting affect home icon link, page metadata and links in generated sitemap.xml. When multi-version publishing used (by default), this url must point to documentation version folder (otherwise links will be incorrect in the sitemap). To avoid manual changes, just configure root site url (e.g. http://myroot.com/ ) and plugin will automatically change site_url before mkdocsBuild (for example, to http://myroot.com/1.0/ ; see build log - it will show updated url). Config is reverted back after the task, so you will not have to commit or revert changes. If site_url option is not defined at all (or multi-version publishing is not enabled) then config will not be changed. You can disable automatic configuration changes: mkdocs . updateSiteUrl = false Note that mkdocsServe is not affected (will generate with the original site_url) because it is not important for documentation writing (you can always call mkdocsBuild and validate urls correctness).","title":"site_url"},{"location":"guide/tasks/","text":"Tasks \u00b6 Init \u00b6 mkdocsInit task generate initial site version into src/doc (or custom location). Note Plugin does not use mkdocs new command for site generation: custom template used with pre-configured plugins and enabled material theme. Task will do nothing if target folder exists and not empty. Dev server \u00b6 mkdocsServe task start live reload server (used during development) on http://127.0.0.1:8000/ . Warning Python process may not be killed after you stop gradle execution (search and kill python process manually). This is a known gradle problem and the only known workaround is to start task without daemon: gradlew mkdocsServe --no-daemon . Another alternative is to start serve command directly: copy console command from task execution log and use it directly. When docker used, container should be properly shut down, but not immediately (about 10s). Build \u00b6 mkdocsBuild task will generate (suppose project version is '1.0-SNAPSHOT'): build/mkdocs/ /1.0-SNAPSHOT/ - mkdocs site index.html - redirect to correct site Plugin is configured for multi-version documentation publishing: each version is in its own folder and special index.html at the root will redirect to the latest version (when published). Everything in build/mkdocs/ is assumed to be published into github pages. Tip As documentation is often updated for already released version, it makes sense to define current version manually (or define it when you need to publish to exact version): mkdocs . publish . docPath = '1.0' For multi-module documentation, mkdocsVersionsFile may be called instead of mkdocsBuild in order to generate versions.json and be able to test version switcher (ofc. it would not be able to actually switch version, but will correctly show all available versions (after publication list would be the same)) Note mkdocsVersionsFile task if available only if full plugin version used (with git publication task), for mkdocs-build plugin it would not be available. With lightweight plugin, versions.json file could be generated in incremental way from existing one Update old documentation \u00b6 When older documentation version needs to be updated switch off redirection index.html generation (so it would not override redirection to the latest version): mkdocs . publish { docPath = '0.9' rootRedirect = false // site root must still redirect to '1.0' (assume it's already published) } Will build: build/mkdocs/ /0.9/ - mkdocs site for old version Publish \u00b6 mkdocsPublish calls mkdocsBuild and publish contents of build/mkdocs/ into git repo (by default, gh-pages branch in current repo). See publication for more details. Custom Mkdocs task \u00b6 If you need to use custom mkdocs command: task doSomething ( type: MkdocsTask ) { command = '--help' } Note Full task package is not required because MkdocsTask is actually a property, regustered by plugin with the full class name in value. :doSomething task call will do: python -m mkdocs --help .","title":"Tasks"},{"location":"guide/tasks/#tasks","text":"","title":"Tasks"},{"location":"guide/tasks/#init","text":"mkdocsInit task generate initial site version into src/doc (or custom location). Note Plugin does not use mkdocs new command for site generation: custom template used with pre-configured plugins and enabled material theme. Task will do nothing if target folder exists and not empty.","title":"Init"},{"location":"guide/tasks/#dev-server","text":"mkdocsServe task start live reload server (used during development) on http://127.0.0.1:8000/ . Warning Python process may not be killed after you stop gradle execution (search and kill python process manually). This is a known gradle problem and the only known workaround is to start task without daemon: gradlew mkdocsServe --no-daemon . Another alternative is to start serve command directly: copy console command from task execution log and use it directly. When docker used, container should be properly shut down, but not immediately (about 10s).","title":"Dev server"},{"location":"guide/tasks/#build","text":"mkdocsBuild task will generate (suppose project version is '1.0-SNAPSHOT'): build/mkdocs/ /1.0-SNAPSHOT/ - mkdocs site index.html - redirect to correct site Plugin is configured for multi-version documentation publishing: each version is in its own folder and special index.html at the root will redirect to the latest version (when published). Everything in build/mkdocs/ is assumed to be published into github pages. Tip As documentation is often updated for already released version, it makes sense to define current version manually (or define it when you need to publish to exact version): mkdocs . publish . docPath = '1.0' For multi-module documentation, mkdocsVersionsFile may be called instead of mkdocsBuild in order to generate versions.json and be able to test version switcher (ofc. it would not be able to actually switch version, but will correctly show all available versions (after publication list would be the same)) Note mkdocsVersionsFile task if available only if full plugin version used (with git publication task), for mkdocs-build plugin it would not be available. With lightweight plugin, versions.json file could be generated in incremental way from existing one","title":"Build"},{"location":"guide/tasks/#update-old-documentation","text":"When older documentation version needs to be updated switch off redirection index.html generation (so it would not override redirection to the latest version): mkdocs . publish { docPath = '0.9' rootRedirect = false // site root must still redirect to '1.0' (assume it's already published) } Will build: build/mkdocs/ /0.9/ - mkdocs site for old version","title":"Update old documentation"},{"location":"guide/tasks/#publish","text":"mkdocsPublish calls mkdocsBuild and publish contents of build/mkdocs/ into git repo (by default, gh-pages branch in current repo). See publication for more details.","title":"Publish"},{"location":"guide/tasks/#custom-mkdocs-task","text":"If you need to use custom mkdocs command: task doSomething ( type: MkdocsTask ) { command = '--help' } Note Full task package is not required because MkdocsTask is actually a property, regustered by plugin with the full class name in value. :doSomething task call will do: python -m mkdocs --help .","title":"Custom Mkdocs task"},{"location":"guide/theme/","text":"Themes \u00b6 By default, plugin assumes material theme usage, but you can use any other theme if you want. Changing theme \u00b6 To apply a new theme you'll need: Add theme package Apply new theme in mkdocs.yml (optional) Remove material-related configurations in mkdocs.yml For example, lets configure ivory theme . First, we need to declare it's package in build.gradle: python . pip 'mkdocs-ivory:0.4.6' Note Additional optional packages may be required for theme (e.g. like for material theme). Just add all required packages: python . pip 'mkdocs-ivory:0.4.6' , 'some-additional-package:1.0' Then changing theme in mkdocs.yml: theme : name : 'ivory' Material-related configurations \u00b6 Default mkdocs.yml ( generated by plugin ) contains special configurations related to material theme, which may be removed (in case of other theme used): theme : name : 'material' palette : - media : \"(prefers-color-scheme: light)\" scheme : default toggle : icon : material/toggle-switch-off-outline name : Switch to dark mode - media : \"(prefers-color-scheme: dark)\" scheme : slate toggle : icon : material/toggle-switch name : Switch to light mode features : - navigation.tracking - navigation.top extra : # palette: # primary: 'indigo' # accent: 'indigo' version : provider : mike social : - icon : fontawesome/brands/github link : https://github.com/xvik - icon : fontawesome/brands/twitter link : https://twitter.com/vyarus # Google Analytics # analytics: # provider: google # property: UA-XXXXXXXX-X plugins : - search - markdownextradata markdown_extensions : # Python Markdown - abbr - admonition - attr_list - def_list - footnotes - meta - md_in_html - toc : permalink : true # Python Markdown Extensions - pymdownx.arithmatex : generic : true - pymdownx.betterem : smart_enable : all - pymdownx.caret - pymdownx.details - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg - pymdownx.highlight - pymdownx.inlinehilite - pymdownx.keys - pymdownx.mark - pymdownx.smartsymbols - pymdownx.superfences - pymdownx.tabbed : alternate_style : true - pymdownx.tasklist : custom_checkbox : true - pymdownx.tilde nav : - Home : index.md - Getting started : getting-started.md - User guide : - Configuration : guide/configuration.md - Pip : guide/pip.md - Variables : guide/vars.md - Multi-version : guide/multi-version.md - Publication : guide/publication.md - Tasks : guide/tasks.md - Themes : guide/theme.md - About : - Release notes : about/history.md - Migration notes : about/migration.md - License : about/license.md Note I don't know if markdown_extensions would work with your theme. You can experiment if you need these extra features (see material theme guide for extensions usage examples).","title":"Themes"},{"location":"guide/theme/#themes","text":"By default, plugin assumes material theme usage, but you can use any other theme if you want.","title":"Themes"},{"location":"guide/theme/#changing-theme","text":"To apply a new theme you'll need: Add theme package Apply new theme in mkdocs.yml (optional) Remove material-related configurations in mkdocs.yml For example, lets configure ivory theme . First, we need to declare it's package in build.gradle: python . pip 'mkdocs-ivory:0.4.6' Note Additional optional packages may be required for theme (e.g. like for material theme). Just add all required packages: python . pip 'mkdocs-ivory:0.4.6' , 'some-additional-package:1.0' Then changing theme in mkdocs.yml: theme : name : 'ivory'","title":"Changing theme"},{"location":"guide/theme/#material-related-configurations","text":"Default mkdocs.yml ( generated by plugin ) contains special configurations related to material theme, which may be removed (in case of other theme used): theme : name : 'material' palette : - media : \"(prefers-color-scheme: light)\" scheme : default toggle : icon : material/toggle-switch-off-outline name : Switch to dark mode - media : \"(prefers-color-scheme: dark)\" scheme : slate toggle : icon : material/toggle-switch name : Switch to light mode features : - navigation.tracking - navigation.top extra : # palette: # primary: 'indigo' # accent: 'indigo' version : provider : mike social : - icon : fontawesome/brands/github link : https://github.com/xvik - icon : fontawesome/brands/twitter link : https://twitter.com/vyarus # Google Analytics # analytics: # provider: google # property: UA-XXXXXXXX-X plugins : - search - markdownextradata markdown_extensions : # Python Markdown - abbr - admonition - attr_list - def_list - footnotes - meta - md_in_html - toc : permalink : true # Python Markdown Extensions - pymdownx.arithmatex : generic : true - pymdownx.betterem : smart_enable : all - pymdownx.caret - pymdownx.details - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg - pymdownx.highlight - pymdownx.inlinehilite - pymdownx.keys - pymdownx.mark - pymdownx.smartsymbols - pymdownx.superfences - pymdownx.tabbed : alternate_style : true - pymdownx.tasklist : custom_checkbox : true - pymdownx.tilde nav : - Home : index.md - Getting started : getting-started.md - User guide : - Configuration : guide/configuration.md - Pip : guide/pip.md - Variables : guide/vars.md - Multi-version : guide/multi-version.md - Publication : guide/publication.md - Tasks : guide/tasks.md - Themes : guide/theme.md - About : - Release notes : about/history.md - Migration notes : about/migration.md - License : about/license.md Note I don't know if markdown_extensions would work with your theme. You can experiment if you need these extra features (see material theme guide for extensions usage examples).","title":"Material-related configurations"},{"location":"guide/vars/","text":"Variables \u00b6 You can declare variables as: mkdocs { extras = [ 'version' : \"${-> project.version}\" , 'something' : 'something else' ] } Warning You'll have to use lazy evaluation syntax for sensitive properties. In the example above actual version ( \"${-> project.version}\" ) would be resolved only just before mkdocs task execution. As an alternative, you can declare some properties just before task execution: mkdocsBuild . doFirst { extras . prop = ... some value calculation } But this will apply property only for one task (e.g. mkdocsServe will not see this property)! Variables applied with markdownextradata mkdocs plugin. The plugin is installed, but not activated by default. To use variables it must be enabled: plugins : - search - markdownextradata (search plugin is enabled by default when plugins section is not declared and so have to be manually specified) Now you can use variables in markdown files: {{ gradle.version }} and {{ gradle.something }} Note Variables will work for all mkdocs tasks ( MkdocsTask ), including mkdocsServe ! Tip All generated variables are also printed in console (for reference). Keys \u00b6 Plugin will automatically replace ' ' and '-' in variable keys into '_'. For example: mkdocs { extras = [ 'something-else other' : 'something else' ] } Will appear as gradle.something_else_other variable. Automation example \u00b6 Variables addition may be scripted. For example, mkdocs plugin's build use this to store used pip modules versions as vars: afterEvaluate { // iterating over modules declared with python.pip python . modules . each { def mod = it . split ( ':' ) // storing module name as-is: plugin will auto correct '-' to '_' mkdocs . extras [ mod [ 0 ]] = mod [ 1 ] } } And version reference in docs looks like: * [ mkdocs: {{ gradle.mkdocs }} ]( https://pypi.python.org/pypi/mkdocs ) * [ mkdocs-material: {{ gradle.mkdocs_material }} ]( https://pypi.python.org/pypi/mkdocs-material ) afterEvaluate block is not required in this case, but it's usually safer to use it to avoid \"configuration property not yet ready\" errors. Show template syntax in doc \u00b6 If you want to prevent replacing variable, for example: {{ not_var }} Then simply apply text \"as variable\" : {{ '{{ not_var }}' }} or use jinja raw block syntax {% raw %} {{ not_var }} {% endraw %} How it works \u00b6 When variables declared ( mkdocs.extras ), plugin will generate a special data file before mkdocs task execution: [mkdocs.yml location]/docs/_data/gradle.yml Markdownextradata plugin loads all yaml files in _data directory by default and so it would recognize and load gradle-declared properties automatically. After task execution, file is removed (because it located inside sources). You can declare additinoal (not gradle-related) variables directly in mkdocs.yml's extra section or using additinoal _data files: see plugin documentation . Tip To update plugin version (for example, in case of bugs): python . pip 'mkdocs-markdownextradata-plugin:0.2.5' Potential problem on linux \u00b6 Markdownextradata plugin requires PyYaml 5.1 or above. If you use older version, you may face the following error: ... File \"/home/travis/.local/lib/python3.6/site-packages/markdownextradata/plugin.py\", line 90, in on_pre_build if filename.suffix in [\".yml\", \".yaml\"] AttributeError: module 'yaml' has no attribute 'FullLoader' To workaround it either upgrade global PyYaml: pip3 install --ignore-installed pyyaml ( --ignore-installed required!) Or specify exact pyyaml version for installation inside environment: python . pip 'pyyaml:5.4.1' Note PyYaml module not declared by default because it's a system module, installed with python. It may require additional packages for installation ( python3-dev ) and so it could cause more problems if it would be updated by default. But, this problem affects only old python versions, and you may never face this. Travis ci \u00b6 Pyyaml problem might be faced on travis: even bionic shipped with python 3.6 brings old pyyaml version. Workaround: language : java dist : bionic addons : apt : packages : - \"python3\" - \"python3-pip\" - \"python3-setuptools\" matrix : include : - jdk : openjdk8 - jdk : openjdk11 before_install : - chmod +x gradlew - pip3 install --upgrade pip # markdownextradata plugin requires at least pyyaml 5.1 - pip3 install --ignore-installed pyyaml","title":"Variables"},{"location":"guide/vars/#variables","text":"You can declare variables as: mkdocs { extras = [ 'version' : \"${-> project.version}\" , 'something' : 'something else' ] } Warning You'll have to use lazy evaluation syntax for sensitive properties. In the example above actual version ( \"${-> project.version}\" ) would be resolved only just before mkdocs task execution. As an alternative, you can declare some properties just before task execution: mkdocsBuild . doFirst { extras . prop = ... some value calculation } But this will apply property only for one task (e.g. mkdocsServe will not see this property)! Variables applied with markdownextradata mkdocs plugin. The plugin is installed, but not activated by default. To use variables it must be enabled: plugins : - search - markdownextradata (search plugin is enabled by default when plugins section is not declared and so have to be manually specified) Now you can use variables in markdown files: {{ gradle.version }} and {{ gradle.something }} Note Variables will work for all mkdocs tasks ( MkdocsTask ), including mkdocsServe ! Tip All generated variables are also printed in console (for reference).","title":"Variables"},{"location":"guide/vars/#keys","text":"Plugin will automatically replace ' ' and '-' in variable keys into '_'. For example: mkdocs { extras = [ 'something-else other' : 'something else' ] } Will appear as gradle.something_else_other variable.","title":"Keys"},{"location":"guide/vars/#automation-example","text":"Variables addition may be scripted. For example, mkdocs plugin's build use this to store used pip modules versions as vars: afterEvaluate { // iterating over modules declared with python.pip python . modules . each { def mod = it . split ( ':' ) // storing module name as-is: plugin will auto correct '-' to '_' mkdocs . extras [ mod [ 0 ]] = mod [ 1 ] } } And version reference in docs looks like: * [ mkdocs: {{ gradle.mkdocs }} ]( https://pypi.python.org/pypi/mkdocs ) * [ mkdocs-material: {{ gradle.mkdocs_material }} ]( https://pypi.python.org/pypi/mkdocs-material ) afterEvaluate block is not required in this case, but it's usually safer to use it to avoid \"configuration property not yet ready\" errors.","title":"Automation example"},{"location":"guide/vars/#show-template-syntax-in-doc","text":"If you want to prevent replacing variable, for example: {{ not_var }} Then simply apply text \"as variable\" : {{ '{{ not_var }}' }} or use jinja raw block syntax {% raw %} {{ not_var }} {% endraw %}","title":"Show template syntax in doc"},{"location":"guide/vars/#how-it-works","text":"When variables declared ( mkdocs.extras ), plugin will generate a special data file before mkdocs task execution: [mkdocs.yml location]/docs/_data/gradle.yml Markdownextradata plugin loads all yaml files in _data directory by default and so it would recognize and load gradle-declared properties automatically. After task execution, file is removed (because it located inside sources). You can declare additinoal (not gradle-related) variables directly in mkdocs.yml's extra section or using additinoal _data files: see plugin documentation . Tip To update plugin version (for example, in case of bugs): python . pip 'mkdocs-markdownextradata-plugin:0.2.5'","title":"How it works"},{"location":"guide/vars/#potential-problem-on-linux","text":"Markdownextradata plugin requires PyYaml 5.1 or above. If you use older version, you may face the following error: ... File \"/home/travis/.local/lib/python3.6/site-packages/markdownextradata/plugin.py\", line 90, in on_pre_build if filename.suffix in [\".yml\", \".yaml\"] AttributeError: module 'yaml' has no attribute 'FullLoader' To workaround it either upgrade global PyYaml: pip3 install --ignore-installed pyyaml ( --ignore-installed required!) Or specify exact pyyaml version for installation inside environment: python . pip 'pyyaml:5.4.1' Note PyYaml module not declared by default because it's a system module, installed with python. It may require additional packages for installation ( python3-dev ) and so it could cause more problems if it would be updated by default. But, this problem affects only old python versions, and you may never face this.","title":"Potential problem on linux"},{"location":"guide/vars/#travis-ci","text":"Pyyaml problem might be faced on travis: even bionic shipped with python 3.6 brings old pyyaml version. Workaround: language : java dist : bionic addons : apt : packages : - \"python3\" - \"python3-pip\" - \"python3-setuptools\" matrix : include : - jdk : openjdk8 - jdk : openjdk11 before_install : - chmod +x gradlew - pip3 install --upgrade pip # markdownextradata plugin requires at least pyyaml 5.1 - pip3 install --ignore-installed pyyaml","title":"Travis ci"}]}