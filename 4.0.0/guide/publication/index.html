
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mkdocs documentation plugin">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <link rel="canonical" href="https://xvik.github.io/gradle-mkdocs-plugin/4.0.0/guide/publication/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.7">
    
    
      
        <title>Publication - Gradle-mkdocs-plugin</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#publication" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Gradle-mkdocs-plugin" class="md-header__button md-logo" aria-label="Gradle-mkdocs-plugin" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gradle-mkdocs-plugin
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Publication
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="http://github.com/xvik/gradle-mkdocs-plugin" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    gradle-mkdocs-plugin
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Gradle-mkdocs-plugin" class="md-nav__button md-logo" aria-label="Gradle-mkdocs-plugin" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Gradle-mkdocs-plugin
  </label>
  
    <div class="md-nav__source">
      <a href="http://github.com/xvik/gradle-mkdocs-plugin" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    gradle-mkdocs-plugin
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          User guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          User guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pip/" class="md-nav__link">
        Pip
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vars/" class="md-nav__link">
        Variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multi-version/" class="md-nav__link">
        Multi-version
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Publication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Publication
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    Authentication
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-additional-resources" class="md-nav__link">
    Publish additional resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publication-tasks" class="md-nav__link">
    Publication tasks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#site_url" class="md-nav__link">
    site_url
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/" class="md-nav__link">
        Tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theme/" class="md-nav__link">
        Themes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/history/" class="md-nav__link">
        Release notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/migration/" class="md-nav__link">
        Migration notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/compatibility/" class="md-nav__link">
        Compatibility
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    Authentication
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-additional-resources" class="md-nav__link">
    Publish additional resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publication-tasks" class="md-nav__link">
    Publication tasks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#site_url" class="md-nav__link">
    site_url
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="http://github.com/xvik/gradle-mkdocs-plugin/edit/master/src/doc/docs/guide/publication.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="publication">Publication<a class="headerlink" href="#publication" title="Permanent link">&para;</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Plugin does not use <a href="http://www.mkdocs.org/#deploying">mkdocs publication</a>, because it does not support
multi-versioning. Instead, custom git publication tasks used for publication (based on <a href="https://github.com/ajoberstar/grgit">grgit</a>).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mkdocs-material <a href="https://squidfunk.github.io/mkdocs-material/setup/setting-up-versioning/">suggests mike tool usage</a> for publication.
Gradle plugin implements <a href="../multi-version/#doc-version-switcher">absolutely the same</a> workflow as mike, but much easier
customizable (as gradle plugin). Material theme would still be able to show version switcher because
plugin generates required versions.json file.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>There is a special lightweight plugin version without publication tasks (and git-publish plugin registration):
<code>ru.vyarus.mkdocs-build</code>. Might be useful if you publish docs in a different way (e.g. with ftp). </p>
</div>
<p>By default, no configuration is required. Only project itself must be published to git so that plugin could calculate default url 
(or <code>mkdocs.publish.repoUrl</code> manually specified).</p>
<p>On the first <code>mkdocsPublish</code> task call:</p>
<ul>
<li><code>gh-pages</code> branch will be created in the same repo</li>
<li>built site pushed to gh-pages repository branch </li>
</ul>
<p>Later <code>mkdocsPublish</code> task calls will only remove current version folder (replace with the new one)
or publish completely new version only.</p>
<p>You can find actual <code>gh-pages</code> branch inside <code>.gradle/gh-pages</code> (this checkout is used for publishing). 
Gradle folder is used to cache repository checkout because eventually it would contain many versions
and there is no need to checkout all of them each time (folder could be changed with <code>mkdocs.publish.repoDir</code>).</p>
<h2 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">&para;</a></h2>
<p>By default, grgit will ask credentials with a popup (swing). Even if github pages are published on the same repo,
the repo is checked out into different folder and so current repository credentials can't be used automatically.  </p>
<p>You can specify credentials as:</p>
<ul>
<li>Environment variables: <code>GRGIT_USER</code> (could be <a href="https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/">github token</a>), <code>GRGIT_PASS</code></li>
<li>System properties: <code>org.ajoberstar.grgit.auth.username</code> (could be github token), <code>org.ajoberstar.grgit.auth.password</code></li>
<li>Directly in <code>gitPublish.username</code> (could be github token) and  <code>gitPublish.password</code> 
  (which would be set as system properties from point 2)</li>
</ul>
<p>See details in <a href="https://ajoberstar.org/grgit/main/grgit-authentication.html">grgit docs</a>.</p>
<p>Plugin will automatically bind gradle properties <code>org.ajoberstar.grgit.auth.*</code> to system properties (just before <code>gitPublishReset</code>).
This allows you to define credentials as global gradle properties in <code>~/.gradle/gradle.properties</code>:</p>
<div class="highlight"><pre><span></span><code><span class="na">org.ajoberstar.grgit.auth.username</span><span class="o">=</span><span class="s">user</span><span class="w"></span>
<span class="na">org.ajoberstar.grgit.auth.password</span><span class="o">=</span><span class="s">pass</span><span class="w"></span>
</code></pre></div>
<p>For testing, you can define properties inside gradle script:</p>
<div class="highlight"><pre><span></span><code><span class="n">ext</span><span class="o">[</span><span class="s1">&#39;org.ajoberstar.grgit.auth.username&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;user&#39;</span><span class="w"></span>
<span class="n">ext</span><span class="o">[</span><span class="s1">&#39;org.ajoberstar.grgit.auth.password&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;pass&#39;</span><span class="w">  </span>
</code></pre></div>
<h2 id="publish-additional-resources">Publish additional resources<a class="headerlink" href="#publish-additional-resources" title="Permanent link">&para;</a></h2>
<p>If you want to publish not only generated site, but something else too then configure
plugin to include additional content.</p>
<p>Examples:</p>
<details open>
    <summary>javadoc</summary>

Here is how you add javadoc:
<div class="highlight"><pre><span></span><code><span class="n">gitPublish</span><span class="o">.</span><span class="na">contents</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">    </span><span class="n">from</span><span class="o">(</span><span class="n">javadoc</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// need to use resolveDocPath because by default it&#39;s a template </span><span class="w"></span>
<span class="w">        </span><span class="n">into</span><span class="w"> </span><span class="s2">&quot;${mkdocs.resolveDocPath()}/javadoc&quot;</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>
<span class="o">}</span><span class="w"></span>

<span class="c1">// dependency will NOT be set automatically by copySpec above</span><span class="w"></span>
<span class="n">gitPublishReset</span><span class="o">.</span><span class="na">dependsOn</span><span class="w"> </span><span class="n">javadoc</span><span class="w"></span>
</code></pre></div>
</details>

<details>
    <summary>dokka</summary>

Here is how you add dokka for a single module:
<div class="highlight"><pre><span></span><code><span class="n">gitPublish</span><span class="o">.</span><span class="na">contents</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">    </span><span class="n">from</span><span class="o">(</span><span class="n">dokkaHtml</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// need to use resolveDocPath because by default it&#39;s a template </span><span class="w"></span>
<span class="w">        </span><span class="n">into</span><span class="w"> </span><span class="s2">&quot;${mkdocs.resolveDocPath()}/dokka&quot;</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>
<span class="o">}</span><span class="w"></span>

<span class="c1">// dependency will NOT be set automatically by copySpec above</span><span class="w"></span>
<span class="n">gitPublishReset</span><span class="o">.</span><span class="na">dependsOn</span><span class="w"> </span><span class="n">dokkaHtml</span><span class="w"></span>
</code></pre></div>
</details>

<details>
    <summary>dokkaMultiModule</summary>

Here is how you add dokka for multiple modules:
<div class="highlight"><pre><span></span><code><span class="n">gitPublish</span><span class="o">.</span><span class="na">contents</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// You cannot use use dokkaHtmlMultiModule directly like with javadoc or dokkaHtml</span><span class="w"></span>
<span class="w">    </span><span class="n">from</span><span class="o">(</span><span class="n">dokkaHtmlMultiModule</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">task</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">task</span><span class="o">.</span><span class="na">outputDirectory</span><span class="o">))</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// need to use resolveDocPath because by default it&#39;s a template </span><span class="w"></span>
<span class="w">        </span><span class="n">into</span><span class="w"> </span><span class="s2">&quot;${mkdocs.resolveDocPath()}/dokka&quot;</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>
<span class="o">}</span><span class="w"></span>

<span class="c1">// dependency will NOT be set automatically by copySpec above</span><span class="w"></span>
<span class="n">gitPublishReset</span><span class="o">.</span><span class="na">dependsOn</span><span class="w"> </span><span class="n">dokkaHtmlMultiModule</span><span class="w"></span>
</code></pre></div>
</details>

<p>To publish </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <a href="../multi-version/">multi-version publishing</a> is not used (<code>mkdocs.publish.docPath</code> set to null) 
<code>${mkdocs.resolveDocPath()}/</code> would be resolved as <code>./</code> and so path would work properly in both modes. </p>
</div>
<p>With this configuration, calling <code>mkdocsPublish</code> will publish generated mkdocs site
with extra <code>javadoc</code> folder inside (you can put relative link to it inside documentation).</p>
<h2 id="publication-tasks">Publication tasks<a class="headerlink" href="#publication-tasks" title="Permanent link">&para;</a></h2>
<p>Originally, plugin was using <a href="https://github.com/ajoberstar/gradle-git-publish">git-publish plugin</a>,
but it was retired. Currently, git-publish tasks added directly into this plugin (with modifications).
To avoid compatibility problems, extra configuration and publication tasks preserved the same:</p>
<ul>
<li><code>gitPublish</code> configuration for git publication configurations. For most cases, plugin configures it itself.
  Still, it may be useful for merging configuration with <a href="#publish-additional-resources">other files</a>.</li>
<li>Tasks:<ul>
<li><code>gitPublishReset</code> - checkout repository</li>
<li><code>mkdocsVersionsFile</code> - generate versions.json file for version switcher</li>
<li><code>gitPublishCopy</code> - copy (and add) files into repository</li>
<li><code>gitPublishCommit</code> - commit updates into repository</li>
<li><code>gitPublishPush</code> - push commit</li>
<li><code>mkdocsPublish</code> - publish to github pages (main task)</li>
</ul>
</li>
</ul>
<p>Normally, you just need to call <code>mkdocsPublish</code> to perform publication
 and <code>mkdocsVersionsFile</code> could be called directly to verify versions file update correctness.
Other tasks could just simplify customizations</p>
<p>Tasks dependency chain:
<div class="highlight"><pre><span></span><code>mkdocsBuild &lt;- gitPublishReset &lt;- mkdocsVersionsFile &lt;- gitPublishCopy &lt;- gitPublishCommit &lt;- gitPublishPush &lt;- mkdocsPublish
</code></pre></div></p>
<p><code>gitPublish</code> configuration reference:</p>
<div class="highlight"><pre><span></span><code><span class="n">gitPublish</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Repository directory. For example:  file(&quot;$buildDir/something&quot;)</span><span class="w"></span>
<span class="w">    </span><span class="n">repoDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="n">mkdocs</span><span class="o">.</span><span class="na">publish</span><span class="o">.</span><span class="na">repoDir</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Repository to publish into (must exists). For example, &#39;git@github.com:user/test-repo.git&#39;</span><span class="w"></span>
<span class="w">    </span><span class="n">repoUri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mkdocs</span><span class="o">.</span><span class="na">publish</span><span class="o">.</span><span class="na">repoUri</span><span class="w"></span>
<span class="w">    </span><span class="c1">// (Optional) Where to fetch from prior to fetching from the remote (i.e. a local repo to save time).</span><span class="w"></span>
<span class="w">    </span><span class="n">referenceRepoUri</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Target branch (would be created if does not exists).</span><span class="w"></span>
<span class="w">    </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mkdocs</span><span class="o">.</span><span class="na">publish</span><span class="o">.</span><span class="na">branch</span><span class="w"> </span>
<span class="w">    </span><span class="c1">// commit message</span><span class="w"></span>
<span class="w">    </span><span class="n">commitMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mkdocs</span><span class="o">.</span><span class="na">publish</span><span class="o">.</span><span class="na">comment</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Signing commits. Omit to use the default from your gitconfig.</span><span class="w"></span>
<span class="w">    </span><span class="n">sign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Repository user name (for authorization). See &quot;org.ajoberstar.grgit.auth.username&quot; property</span><span class="w"></span>
<span class="w">    </span><span class="c1">// https://ajoberstar.org/grgit/main/grgit-authentication.html</span><span class="w"></span>
<span class="w">    </span><span class="n">username</span><span class="w"> </span><span class="c1">// could be auto filled from gradle property &quot;org.ajoberstar.grgit.auth.username&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Repository password or github token. See &quot;org.ajoberstar.grgit.auth.password&quot; property</span><span class="w"></span>
<span class="w">    </span><span class="n">password</span><span class="w"> </span><span class="c1">// could be auto filled from gradle property &quot;org.ajoberstar.grgit.auth.password&quot;</span><span class="w"></span>

<span class="w">    </span><span class="c1">//  Content to add into repository (gradle CopySpec). For example:</span><span class="w"></span>
<span class="w">    </span><span class="c1">//  contents {</span><span class="w"></span>
<span class="w">    </span><span class="c1">//    from &#39;src/pages&#39;</span><span class="w"></span>
<span class="w">    </span><span class="c1">//    from(javadoc) {</span><span class="w"></span>
<span class="w">    </span><span class="c1">//      into &#39;api&#39;</span><span class="w"></span>
<span class="w">    </span><span class="c1">//    }</span><span class="w"></span>
<span class="w">    </span><span class="c1">//  }</span><span class="w"></span>
<span class="w">    </span><span class="c1">// https://docs.gradle.org/current/dsl/org.gradle.api.tasks.Copy.html</span><span class="w"></span>
<span class="w">    </span><span class="n">contents</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="n">from</span><span class="o">(</span><span class="s2">&quot;${mkdocs.buildDir}&quot;</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// What to keep (or remote) in existing branch. For example:</span><span class="w"></span>
<span class="w">    </span><span class="c1">// preserve {</span><span class="w"></span>
<span class="w">    </span><span class="c1">//    include &#39;1.0.0/**&#39;</span><span class="w"></span>
<span class="w">    </span><span class="c1">//    exclude &#39;1.0.0/temp.txt&#39;</span><span class="w"></span>
<span class="w">    </span><span class="c1">// }</span><span class="w"></span>
<span class="w">    </span><span class="c1">// https://docs.gradle.org/current/javadoc/org/gradle/api/tasks/util/PatternFilterable.html</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">multi_version_publish</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// preserve everything except currently published version (in case of re-publish)</span><span class="w"></span>
<span class="w">        </span><span class="n">preserve</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">            </span><span class="n">include</span><span class="w"> </span><span class="s1">&#39;**&#39;</span><span class="w"></span>
<span class="w">            </span><span class="n">exclude</span><span class="w"> </span><span class="s2">&quot;${mkdocs.publish.docPath}/**&quot;</span><span class="w"></span>
<span class="w">        </span><span class="o">}</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>
<span class="o">}</span><span class="w"></span>
</code></pre></div>
<p>Publication process:</p>
<ol>
<li><code>mkdocsBuild</code> build site into  <code>$mkdocs.buildDir/$mkdocs.publish.docPath</code> (by default, <code>build/mkdocs/$version/</code>)<ul>
<li>root redirect <code>index.html</code> generated (by default, <code>build/mkdocs/index.html</code>)</li>
<li>if required, alias folders would be generated too (by copying generated version content)</li>
</ul>
</li>
<li><code>gitPublishReset</code> clones gh-pages repo (by default, into <code>.gradle/gh-pages</code>) or creates new one<ul>
<li>cleanup repo according to <code>gitPublish.preserve</code> (by default, <code>.gradle/gh-pages/$version/</code> folder removed only)</li>
</ul>
</li>
<li><code>mkdocsVersionsFile</code> generates versions.json file based on version folders checked out from gh-pages repository
   (file generated in <code>$mkdocs.buildDir</code>)</li>
<li><code>gitPublishCopy</code> copies everything according to <code>gitPublish.contents</code> (by default, everything from <code>build/mkdocs</code>)</li>
<li><code>gitPublishCommit</code>, <code>gitPublishPush</code> - commit changes and push to gh-pages repository (by default, <code>gh-pages</code> branch in current repo)</li>
</ol>
<p>You can configure additional folders for publication with <code>contents</code> (as shown above with javadoc) 
and cleanup extra directories with <code>preserve</code> configuration. For example:</p>
<div class="highlight"><pre><span></span><code><span class="n">gitPublish</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">    </span><span class="n">contents</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="n">from</span><span class="w"> </span><span class="s1">&#39;build/custom-dir&#39;</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">            </span><span class="n">into</span><span class="w"> </span><span class="s1">&#39;custom-dir&#39;</span><span class="w">        </span>
<span class="w">        </span><span class="o">}</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>

<span class="w">    </span><span class="n">preserve</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="n">exclude</span><span class="w"> </span><span class="s1">&#39;custom-dir&#39;</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>
<span class="o">}</span><span class="w"></span>
</code></pre></div>
<p>Here extra <code>build/custom-dir</code> directory added for publication (into <code>custom-dir</code>)
and previous <code>custom-dir</code> folder (already committed) will be removed before publication.</p>
<h2 id="site_url">site_url<a class="headerlink" href="#site_url" title="Permanent link">&para;</a></h2>
<p><a href="http://www.mkdocs.org/user-guide/configuration/#site_url"><code>site_url</code></a> configuration defined in mkdocs.yml should point to the site root. It may be github pages or some custom domain.
Setting affect home icon link, page metadata and links in generated sitemap.xml.</p>
<p>When multi-version publishing used (by default), this url must point to documentation version folder
(otherwise links will be incorrect in the sitemap). To avoid manual changes, just configure <em>root site url</em> (e.g. <code>http://myroot.com/</code>) and 
plugin will <em>automatically</em> change site_url before <code>mkdocsBuild</code> (for example, to <code>http://myroot.com/1.0/</code>; see build log - it will show updated url). 
Config is reverted back after the task, so you will not have to commit or revert changes.</p>
<p>If <code>site_url</code> option is not defined at all (or multi-version publishing is not enabled) then
config will not be changed.</p>
<p>You can disable automatic configuration changes:</p>
<div class="highlight"><pre><span></span><code><span class="n">mkdocs</span><span class="o">.</span><span class="na">updateSiteUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
</code></pre></div>
<p>Note that <code>mkdocsServe</code> is not affected (will generate with the original site_url) because it is
not important for documentation writing (you can always call <code>mkdocsBuild</code> and validate urls correctness).</p>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../multi-version/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Multi-version" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Multi-version
            </div>
          </div>
        </a>
      
      
        
        <a href="../tasks/" class="md-footer__link md-footer__link--next" aria-label="Next: Tasks" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Tasks
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2017-2022 Vyacheslav Rusakov
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/xvik" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/vyarus" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.top"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
    
  </body>
</html>